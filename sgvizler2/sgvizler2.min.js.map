{"version":3,"file":"sgvizler2.min.js","sources":["../../node_modules/tslib/tslib.es6.js","../module/index.js","../module/sgvizler/Chart.js","../module/sgvizler/visualization/Table.js","../module/sgvizler/Loader.js","../module/sgvizler/Dependency.js","../module/sgvizler/SparqlError.js","../module/sgvizler/Select.js","../module/sgvizler/Messages.js","../module/sgvizler/Tools.js","../module/sgvizler/Logger.js","../module/sgvizler/Core.js","../module/sgvizler/SparqlTools.js","../module/sgvizler/Request.js","../module/sgvizler/Container.js","../module/sgvizler.js","../module/bordercloud/visualization/DataTable.js","../module/bordercloud.js","../module/google/visualization/Data.js","../module/google/visualization/Table.js","../module/google/API.js","../module/google/visualization/Map.js","../module/google.js","../module/d3/visualization/Pie.js","../module/d3.js","../module/leaflet/API.js","../module/leaflet/visualization/Map.js","../module/leaflet.js"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator.throw(value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}","'use strict';\n/** @module example */\nimport * as jqueryProxy from 'jquery';\nconst jquery = jqueryProxy.default || jqueryProxy;\n// Namespace\nimport * as S from './sgvizler';\nexport const sgvizler = S;\nimport * as bordercloudNS from './bordercloud';\nexport const bordercloud = bordercloudNS;\nimport * as googleNS from './google';\nexport const google = googleNS;\nimport * as d3NS from './d3';\nexport const d3 = d3NS;\nimport * as leafletNS from './leaflet';\nexport const leaflet = leafletNS;\n/**\n * Todo\n * @const\n *\n */\nexport const VERSION = S.Core.VERSION;\n/**\n * Todo\n * @const\n */\nexport const HOMEPAGE = S.Core.HOMEPAGE;\n/**\n * Draws the sgvizler-containers with the given element id.\n *\n */\nexport function containerLoadAll() {\n    S.Container.loadAllDependencies();\n}\nfunction readOptions(options) {\n    if (options) {\n        if (typeof options === 'object') {\n            google.API.key = options.googleApiKey ? options.googleApiKey : '';\n            leaflet.API.osmAccessToken = options.osmAccessToken ? options.osmAccessToken : '';\n        }\n    }\n}\n/**\n * Draws the sgvizler-containers with the given element id.\n * @param {string} elementID\n */\nexport function containerDraw(elementID, options) {\n    // S.Container.loadDependenciesId(elementID)\n    readOptions(options);\n    S.Container.drawWithElementId(elementID);\n}\n/**\n * Todo.\n */\nexport function containerDrawAll(options) {\n    // S.Container.loadAllDependencies()\n    readOptions(options);\n    S.Container.drawAll();\n}\n/**\n * Todo.\n */\nexport function selectDraw(elementID) {\n    // S.Select.loadDependencies()\n    S.Select.drawWithElementId(elementID);\n}\n/**\n * Todo.\n */\nexport function selectDrawAll() {\n    // S.Select.loadDependencies()\n    S.Select.drawAll();\n}\n/**\n * Todo.\n * @param {string} className\n * @param {string} pathDoc\n * @returns {string}\n */\nexport function getChartDoc(className, pathDoc) {\n    return S.Select.getChartDoc(className, pathDoc);\n}\n/**\n * Todo\n * @param {string} elementID\n * @param {string} endpoint\n * @param {string} query\n * @param {string} chartName\n * @param {string} options\n * @param {string} loglevel\n * @returns {string}\n */\nexport function create(elementID, endpoint, query, chartName, options, loglevel) {\n    return S.Container.create(elementID, endpoint, query, chartName, options, loglevel);\n}\n// noinspection JSPotentiallyInvalidConstructorUsage\njqueryProxy.prototype.extend({\n    selectchart: function (param, option) {\n        let $this = this;\n        let action = 'render';\n        if (param) {\n            if (typeof param === 'string') {\n                action = param;\n            }\n            else if (typeof param === 'object') {\n                action = param.action ? param.action : action;\n            }\n        }\n        // Return the jQuery object for chaining.\n        return $this.each(function (index, obj) {\n            if (index > 0 && action === 'render') {\n                if (param && typeof param === 'object') {\n                    S.Select.draw(obj, param);\n                }\n                else {\n                    S.Select.draw(obj);\n                }\n            }\n        });\n    },\n    containerchart: function (param, option) {\n        let $this = this;\n        let action = 'render';\n        if (param) {\n            if (typeof param === 'string') {\n                action = param;\n            }\n            else if (typeof param === 'object') {\n                action = param.action ? param.action : action;\n            }\n        }\n        // Return the jQuery object for chaining.\n        return $this.each(function (index, obj) {\n            if (index > 0 && action === 'render') {\n                if (param && typeof param === 'object') {\n                    S.Container.drawWithElementId($(obj).attr('id'), param);\n                }\n                else {\n                    S.Container.drawWithElementId($(obj).attr('id'));\n                }\n            }\n        });\n    }\n});\nS.Loader.detectRoot();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFBO0FBRVosc0JBQXNCO0FBQ3RCLE9BQU8sS0FBSyxXQUFXLE1BQU0sUUFBUSxDQUFBO0FBQ3JDLE1BQU0sTUFBTSxHQUFrQixXQUFtQixDQUFDLE9BQU8sSUFBSSxXQUFXLENBQUE7QUFFeEUsWUFBWTtBQUNaLE9BQU8sS0FBSyxDQUFDLE1BQU0sWUFBWSxDQUFBO0FBQy9CLE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FBRyxDQUFDLENBQUE7QUFFekIsT0FBTyxLQUFLLGFBQWEsTUFBTSxlQUFlLENBQUE7QUFDOUMsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFHLGFBQWEsQ0FBQTtBQUV4QyxPQUFPLEtBQUssUUFBUSxNQUFNLFVBQVUsQ0FBQTtBQUNwQyxNQUFNLENBQUMsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFBO0FBRTlCLE9BQU8sS0FBSyxJQUFJLE1BQU0sTUFBTSxDQUFBO0FBQzVCLE1BQU0sQ0FBQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUE7QUFFdEIsT0FBTyxLQUFLLFNBQVMsTUFBTSxXQUFXLENBQUE7QUFDdEMsTUFBTSxDQUFDLE1BQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQTtBQUVoQzs7OztHQUlHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sT0FBTyxHQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFBO0FBRTdDOzs7R0FHRztBQUNILE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQTtBQUUvQzs7O0dBR0c7QUFDSCxNQUFNO0lBQ0EsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxtQkFBbUIsRUFBRSxDQUFBO0FBQ3ZDLENBQUM7QUFFRCxxQkFBc0IsT0FBWTtJQUM5QixFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ1Ys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","import * as tslib_1 from \"tslib\";\nimport { Logger, MESSAGES, CssDependency, ScriptDependency, Loader } from '../sgvizler';\n/**\n * Define the type of patterns for the options\n *\n * @class sgvizler.CHART_PATTERN_OPTIONS\n * @memberof sgvizler\n */\nexport var CHART_PATTERN_OPTIONS;\n(function (CHART_PATTERN_OPTIONS) {\n    CHART_PATTERN_OPTIONS[CHART_PATTERN_OPTIONS[\"EMPTY\"] = 0] = \"EMPTY\";\n    CHART_PATTERN_OPTIONS[CHART_PATTERN_OPTIONS[\"UNKNOWN\"] = 1] = \"UNKNOWN\";\n    CHART_PATTERN_OPTIONS[CHART_PATTERN_OPTIONS[\"VARIABLE\"] = 2] = \"VARIABLE\";\n    CHART_PATTERN_OPTIONS[CHART_PATTERN_OPTIONS[\"STYLE\"] = 3] = \"STYLE\";\n    CHART_PATTERN_OPTIONS[CHART_PATTERN_OPTIONS[\"CLASS\"] = 4] = \"CLASS\";\n})(CHART_PATTERN_OPTIONS || (CHART_PATTERN_OPTIONS = {}));\n/**\n * Abstract class for all the charts. Ensures that chart types\n * correctly inherit methods from this class.\n * @class sgvizler.Chart\n * @abstract\n * @export\n * @memberof sgvizler\n */\nexport class Chart {\n    /**\n     * Constructor of all chart types created by\n     * sgvizler.charts inherit from.\n     * @memberof sgvizler.Chart\n     * @constructor sgvizler.Chart\n     */\n    constructor() {\n        /**\n         * Give the options of chart\n         * @property options\n         * @memberof sgvizler.Chart\n         * @public\n         * @type {{}}\n         */\n        this.options = {};\n        this._tabDependences = [];\n        this._patternOptions = CHART_PATTERN_OPTIONS.EMPTY;\n        this._width = '';\n        this._height = '';\n        this._optionsRaw = '';\n        this._class = '';\n        this._style = '';\n        this._width = '100%';\n        this._isDone = false;\n        let currentThis = this;\n        Loader.on('loaded', () => {\n            if (currentThis.container != null &&\n                !currentThis._isDone &&\n                currentThis.isLoadedAllDependencies() &&\n                currentThis._resultSparql !== null) {\n                currentThis.doDraw();\n            }\n        });\n    }\n    loadDependenciesAndDraw(result) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            Logger.log('Chart loaded dependencies : ' + this.container.id);\n            // let promisesArray: Array<any> = []\n            this._resultSparql = result;\n            if (this.isLoadedAllDependencies()) {\n                yield this.doDraw();\n            }\n            else {\n                yield this.loadDependencies();\n            }\n        });\n    }\n    loadDependencies() {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            let promisesArray = [];\n            for (let dep of this._tabDependences) {\n                promisesArray.push(dep.load());\n            }\n            return Promise.all(promisesArray);\n        });\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @returns {CHART_PATTERN_OPTIONS}\n     */\n    get patternOptions() {\n        return this._patternOptions;\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @returns {string}\n     */\n    get classHtml() {\n        return this._class;\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @param {string} value\n     */\n    set classHtml(value) {\n        this._class = value;\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @returns {string}\n     */\n    get style() {\n        return this._style;\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @param {string} value\n     */\n    set style(value) {\n        this._style = value;\n    }\n    /**\n     *\n     * @memberof sgvizler.Chart\n     * @returns {Container}\n     */\n    get container() {\n        return this._container;\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @param {Container} value\n     */\n    set container(value) {\n        this._container = value;\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @returns {string}\n     */\n    get optionsRaw() {\n        return this._optionsRaw;\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @param {string} value\n     */\n    set optionsRaw(value) {\n        this._optionsRaw = value;\n        this.doParseOptionsRaw();\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @returns {string}\n     */\n    get height() {\n        return this._height;\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @param {string} value\n     */\n    set height(value) {\n        this._height = value;\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @returns {string}\n     */\n    get width() {\n        return this._width;\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @param {string} value\n     */\n    set width(value) {\n        this._width = value;\n    }\n    /**\n     * Todo\n     * @memberof sgvizler.Chart\n     * @returns {string}\n     */\n    getHTMLStyleOrClass() {\n        let html = '';\n        let opts = this.options;\n        if (this._patternOptions === CHART_PATTERN_OPTIONS.CLASS) {\n            html = Object.keys(opts).map((property) => '${opts[property]}').join(' ');\n            html = 'class=\"' + html + '\"';\n        }\n        if (this._patternOptions === CHART_PATTERN_OPTIONS.STYLE) {\n            html = Object.keys(opts).map((property) => '${property}:${opts[property]}').join(';');\n            html = 'style=\"' + html + '\"';\n        }\n        return html;\n    }\n    addScript(url, loadBefore) {\n        let dep = new ScriptDependency(url, loadBefore);\n        this._tabDependences.push(dep);\n        return dep;\n    }\n    addCss(url, loadBefore) {\n        let dep = new CssDependency(url, loadBefore);\n        this._tabDependences.push(dep);\n        return dep;\n    }\n    isLoadedAllDependencies() {\n        for (let dep of this._tabDependences) {\n            if (!Loader.isLoaded(dep)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    doDraw() {\n        Logger.log('Chart started : ' + this._container.id);\n        let currentThis = this;\n        if (this._resultSparql !== null) {\n            this.draw(this._resultSparql).then(function (valeur) {\n                currentThis._isDone = true;\n                Logger.log('Chart finished : ' + currentThis._container.id);\n            }, function (error) {\n                console.log(error);\n                Logger.displayFeedback(currentThis._container, MESSAGES.ERROR_CHART, [error]);\n                Logger.log('Chart finished with error : ' + currentThis._container.id);\n            });\n        }\n        else {\n            Logger.displayFeedback(currentThis._container, MESSAGES.ERROR_DATA_EMPTY);\n            Logger.log('Chart finished with error : ' + currentThis._container.id);\n        }\n    }\n    // noinspection JSValidateJSDoc\n    // noinspection tslint\n    /**\n     * todo\n     * @memberof sgvizler.Chart\n     * @param {RegExp} patternOption\n     * @param {CHART_PATTERN_OPTIONS} typePattern\n     */\n    execPattern(patternOption, typePattern) {\n        let matchArray;\n        let raw = this._optionsRaw;\n        while ((matchArray = patternOption.exec(raw)) !== null) {\n            // this.options[matchArray[1].toLowerCase()] = matchArray[2].trim()\n            this.options[matchArray[1]] = matchArray[2].trim();\n            this._patternOptions = typePattern;\n        }\n    }\n    /**\n     * todo\n     * @memberof sgvizler.Chart\n     */\n    doParseOptionsRaw() {\n        // 3 possibilities\n        // pattern option : separate by optionA=a|optionB=b\n        // pattern style : any options, only style separate by ;\n        // pattern class : words separate by space\n        // noinspection TsLint\n        let patternOption = /\\|? *([^=]*) *= *([^=|]*)/iy; // tslint:disable-line\n        let patternStyle = /([^:]+):([^:;]+) *;?/iy; // tslint:disable-line\n        let patternClass = /([^ |;]+) ?/iy; // tslint:disable-line\n        let raw = this._optionsRaw;\n        if (raw === '') {\n            this._patternOptions = CHART_PATTERN_OPTIONS.EMPTY;\n        }\n        else {\n            this._patternOptions = CHART_PATTERN_OPTIONS.UNKNOWN;\n        }\n        if (this.patternOptions === CHART_PATTERN_OPTIONS.UNKNOWN) {\n            this.execPattern(patternOption, CHART_PATTERN_OPTIONS.VARIABLE);\n        }\n        if (this.patternOptions === CHART_PATTERN_OPTIONS.UNKNOWN) {\n            this.execPattern(patternStyle, CHART_PATTERN_OPTIONS.STYLE);\n        }\n        if (this.patternOptions === CHART_PATTERN_OPTIONS.UNKNOWN) {\n            let matchArray;\n            let raw = this._optionsRaw;\n            let i = 0;\n            while ((matchArray = patternClass.exec(raw)) !== null) {\n                this.options['class' + i] = matchArray[2];\n                this._patternOptions = CHART_PATTERN_OPTIONS.UNKNOWN;\n                i++;\n            }\n        }\n        if (this.patternOptions === CHART_PATTERN_OPTIONS.UNKNOWN) {\n            Logger.displayFeedback(this.container, MESSAGES.ERROR_CHART_PATTERN_OPTION_UNKNOWN, [this._optionsRaw]);\n        }\n        else if (this.patternOptions === CHART_PATTERN_OPTIONS.VARIABLE ||\n            this.patternOptions === CHART_PATTERN_OPTIONS.STYLE) {\n            if (this.options['width'] !== undefined) {\n                this.width = this.options['width'];\n            }\n            if (this.options['height'] !== undefined) {\n                this.height = this.options['height'];\n            }\n        }\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2hhcnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2d2aXpsZXIvQ2hhcnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFHSCxNQUFNLEVBQ04sUUFBUSxFQUVSLGFBQWEsRUFDYixnQkFBZ0IsRUFDaEIsTUFBTSxFQUNULE1BQU0sYUFBYSxDQUFBO0FBRXBCOzs7OztHQUtHO0FBQ0gsTUFBTSxDQUFOLElBQVkscUJBTVg7QUFORCxXQUFZLHFCQUFxQjtJQUM3QixtRUFBSyxDQUFBO0lBQ0wsdUVBQU8sQ0FBQTtJQUNQLHlFQUFRLENBQUE7SUFDUixtRUFBSyxDQUFBO0lBQ0wsbUVBQUssQ0FBQTtBQUNULENBQUMsRUFOVyxxQkFBcUIsS0FBckIscUJBQXFCLFFBTWhDO0FBRUQ7Ozs7Ozs7R0FPRztBQUNILE1BQU07SUFxQkY7Ozs7O09BS0c7SUFDSDtRQTFCQTs7Ozs7O1dBTUc7UUFDSSxZQUFPLEdBQVEsRUFBRSxDQUFBO1FBR2hCLG9CQUFlLEdBQXNCLEVBQUUsQ0FBQTtRQUV2QyxvQkFBZSxHQUEwQixxQkFBcUIsQ0FBQyxLQUFLLENBQUE7UUFFcEUsV0FBTSxHQUFXLEVBQUUsQ0FBQTtRQUNuQixZQUFPLEdBQVcsRUFBRSxDQUFBO1FBQ3BCLGdCQUFXLEdBQVcsRUFBRSxDQUFBO1FBQ3hCLFdBQU0sR0FBVyxFQUFFLENBQUE7UUFDbkIsV0FBTSxHQUFXLEVBQUUsQ0FBQTtRQVN2QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQTtRQUNwQixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtRQUVwQixJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUE7UUFDdEIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUM7WUFDZixFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsU0FBUyxJQUFJLElBQUk7Z0JBQzdCLENBQUUsV0FBVyxDQUFDLE9BQU87Z0JBQ3JCLFdBQVcsQ0FBQyx1QkFBdUIs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","import { Chart } from '../Chart';\n/**\n * Todo Table\n * @class sgvizler.visualization.Table\n * @tutorial sgvizler_visualization_Table\n * @memberof sgvizler.visualization\n */\nexport class Table extends Chart {\n    get icon() {\n        return 'fa-table';\n    }\n    get label() {\n        return 'Table';\n    }\n    get subtext() {\n        return 'simple table';\n    }\n    get classFullName() {\n        return 'sgvizler.visualization.Table';\n    }\n    get tutorialFilename() {\n        return 'tutorial-sgvizler_visualization_Table.html';\n    }\n    constructor() {\n        super();\n        //  addDependence(SparqlResult)\n    }\n    /**\n     * Make a standard simple html table.\n     * Available options:\n     * - 'headings'   :  \"true\" / \"false\"  (default: \"true\")\n     * @memberOf Table\n     * @returns {Promise<void>}\n     * @param result\n     */\n    draw(result) {\n        let currentChart = this;\n        return new Promise(function (resolve, reject) {\n            // transform query\n            // console.log(noCols + \" x \" + noRows)\n            let opt = Object.assign({ headings: 'true' }, currentChart.options);\n            let cols = result.head.vars;\n            let rows = result.results.bindings;\n            let noCols = cols.length;\n            let noRows = rows.length;\n            // console.log(opt)\n            let html = '<table ' + currentChart.getHTMLStyleOrClass() + ' >';\n            if (opt.headings === 'true') {\n                html += '<tr>';\n                for (let col of cols) {\n                    html += '<th>' + col + '</th>';\n                }\n                html += '</tr>';\n            }\n            for (let row of rows) {\n                html += '<tr>';\n                for (let col of cols) {\n                    html += '<td>' + row[col].value + '</td>';\n                }\n                html += '</tr>';\n            }\n            html += '</table>';\n            let obj = document.getElementById(currentChart.container.id);\n            if (obj) {\n                obj.innerHTML = html;\n            }\n            // finish\n            resolve();\n        });\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGFibGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvc2d2aXpsZXIvdmlzdWFsaXphdGlvbi9UYWJsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sVUFBVSxDQUFBO0FBSWhDOzs7OztHQUtHO0FBQ0gsTUFBTSxZQUFhLFNBQVEsS0FBSztJQUU1QixJQUFXLElBQUk7UUFDWCxNQUFNLENBQUMsVUFBVSxDQUFBO0lBQ3JCLENBQUM7SUFFRCxJQUFXLEtBQUs7UUFDWixNQUFNLENBQUMsT0FBTyxDQUFBO0lBQ2xCLENBQUM7SUFFRCxJQUFXLE9BQU87UUFDZCxNQUFNLENBQUMsY0FBYyxDQUFBO0lBQ3pCLENBQUM7SUFFRCxJQUFXLGFBQWE7UUFDcEIsTUFBTSxDQUFDLDhCQUE4QixDQUFBO0lBQ3pDLENBQUM7SUFFRCxJQUFXLGdCQUFnQjtRQUN2QixNQUFNLENBQUMsNENBQTRDLENBQUE7SUFDdkQsQ0FBQztJQUVEO1FBQ0ksS0FBSyxFQUFFLENBQUE7UUFDVCwrQkFBK0I7SUFDakMsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSSxJQUFJLENBQUUsTUFBNkI7UUFDdEMsSUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFBO1FBQ3ZCLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBQyxVQUFVLE9BQU8sRUFBRSxNQUFNO1lBQ3hDLGtCQUFrQjtZQUNsQix1Q0FBdUM7WUFDdkMsSUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsRUFBRSxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUE7WUFFbkUsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUE7WUFDM0IsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUE7WUFDbEMsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQTtZQUN4QixJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFBO1lBRXhCLG1CQUFtQjtZQUNuQixJQUFJLElBQUksR0FBRyxTQUFTLEdBQUcsWUFBWSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsSUFBSSxDQUFBO1lBQ2hFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDMUIsSUFBSSxJQUFJLE1BQU0sQ0FBQTtnQkFDZCxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO29CQUNuQixJQUFJLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxPQUFPLENBQUE7Z0JBQ2xDLENBQUM7Z0JBQ0QsSUFBSSxJQUFJLE9BQU8sQ0FBQTtZQUNuQixDQUFDO1lBRUQsR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDbkIsSUFBSSxJQUFJLE1BQU0sQ0FBQTtnQkFDZCxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO29CQUNuQixJQUFJLElBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFBO2dCQUM3QyxDQUFDO2dCQUNELElBQUksSUFBSSxPQUFPLENBQUE7WUFDbkIsQ0FBQztZQUVELElBQUksSUFBSSxVQUFVLENBQUE7WUFFbEIsSUFBSSxHQUFHLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFBO1lBQzVELEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ04sR0FBRyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUE7WUFDeEIsQ0FBQztZQUNELFNBQVM7WUFDVCxPQUFPLEVBQUUsQ0FBQTtRQUNiLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQztDQUNKIn0=","import { Logger, ScriptDependency, CssDependency } from '../sgvizler';\n/**\n * Todo\n *\n * @class sgvizler.visualization.Loader\n * @memberof sgvizler.visualization\n */\nexport class Loader {\n    static on(event, fn) {\n        if (event === 'loaded') {\n            Loader._listCallEvent.push(fn);\n        }\n    }\n    static detectRoot() {\n        let resultXpath = document.evaluate('//script[contains(@src,\"sgvizler2.js\")]/@src', document, null, XPathResult.STRING_TYPE, null);\n        let srcScript = resultXpath.stringValue;\n        let match = /^(.*)sgvizler2\\.js$/.exec(srcScript);\n        if (match) {\n            Loader._pathScripts = match[1];\n        }\n    }\n    static isLoad(dep) {\n        return Loader._load.indexOf(dep.url) !== -1;\n    }\n    static isLoaded(dep) {\n        return Loader._loaded.indexOf(dep.url) !== -1;\n    }\n    static load(dep) {\n        if (dep instanceof ScriptDependency) {\n            Loader.loadScript(dep);\n        }\n        else if (dep instanceof CssDependency) {\n            Loader.loadCss(dep);\n        }\n    }\n    static fireEvent(event) {\n        for (let call of Loader._listCallEvent) {\n            call(event);\n        }\n    }\n    static checkDependenciesToLoad() {\n        let len = Loader._dependenciesToLoad.length;\n        for (let i = 0; i < len; i++) {\n            let dep = Loader._dependenciesToLoad[i];\n            if (dep === undefined || Loader.isLoaded(dep)) {\n                this._dependenciesToLoad.splice(i);\n            }\n            else {\n                if (dep instanceof ScriptDependency) {\n                    Loader.loadScript(dep);\n                }\n                else if (dep instanceof ScriptDependency) {\n                    Loader.loadCss(dep);\n                }\n            }\n        }\n    }\n    static getAbsoluteURL(url) {\n        if (url.match(/^(\\/\\/|https?)/)) {\n            return url;\n        }\n        else {\n            return Loader._pathScripts + url;\n        }\n    }\n    static loadScript(dep) {\n        let url = dep.url;\n        return new Promise(function (resolve, reject) {\n            if (dep.loadBefore && !dep.loadBefore.endDownload) {\n                Logger.log('Waiting : ' + dep.loadBefore.url + ' before ' + dep.url);\n                Loader._dependenciesToLoad.push(dep);\n                return Loader.load(dep.loadBefore);\n            }\n            // include script only once\n            if (Loader.isLoad(dep)) {\n                return; // false;\n            }\n            else {\n                Loader._load.push(url);\n            }\n            Logger.log('Loading : ' + dep.url);\n            // Adding the script tag to the head as suggested before\n            let head = document.getElementsByTagName('head')[0];\n            let script = document.createElement('script');\n            script.type = 'text/javascript';\n            script.src = Loader.getAbsoluteURL(url);\n            // Then bind the event to the callback function.\n            // There are several events for cross browser compatibility.\n            script.onload = function () {\n                Loader._loaded.push(url); // in first\n                dep.callBack();\n                Loader.checkDependenciesToLoad();\n                // remember included script\n                Loader.fireEvent('loaded');\n            };\n            // Fire the loading\n            head.appendChild(script);\n        });\n    }\n    static loadCss(dep) {\n        let url = dep.url;\n        return new Promise(function (resolve, reject) {\n            if (dep.loadBefore && !dep.loadBefore.endDownload) {\n                Loader._dependenciesToLoad.push(dep);\n                return Loader.load(dep.loadBefore);\n            }\n            // include script only once\n            if (Loader.isLoad(dep)) {\n                return; // false;\n            }\n            else {\n                Loader._load.push(url);\n            }\n            // <link rel=\"stylesheet\" type=\"text/css\" href=\"../dist/datatables.min.css\"/>\n            let head = document.getElementsByTagName('head')[0];\n            let link = document.createElement('link');\n            link.rel = 'stylesheet';\n            link.href = Loader.getAbsoluteURL(url);\n            // Then bind the event to the callback function.\n            // There are several events for cross browser compatibility.\n            link.onload = function () {\n                Loader._loaded.push(url);\n                Logger.log('Loaded : ' + url);\n                dep.callBack();\n                Loader.checkDependenciesToLoad();\n                // remember included script\n                Loader.fireEvent('loaded');\n            };\n            // Fire the loading\n            head.appendChild(link);\n        });\n    }\n}\nLoader._load = [];\nLoader._loaded = [];\nLoader._dependenciesToLoad = [];\nLoader._pathScripts = '';\nLoader._listCallEvent = [];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9hZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Nndml6bGVyL0xvYWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0gsTUFBTSxFQUNOLGdCQUFnQixFQUNoQixhQUFhLEVBRWhCLE1BQU0sYUFBYSxDQUFBO0FBRXBCOzs7OztHQUtHO0FBQ0gsTUFBTTtJQU9LLE1BQU0sQ0FBQyxFQUFFLENBQUUsS0FBYSxFQUFDLEVBQU87UUFDbkMsRUFBRSxDQUFDLENBQUMsS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDckIsTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUE7UUFDbEMsQ0FBQztJQUNMLENBQUM7SUFFTSxNQUFNLENBQUMsVUFBVTtRQUNwQixJQUFJLFdBQVcsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLDhDQUE4QyxFQUM5RSxRQUFRLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFFLENBQUE7UUFDbkQsSUFBSSxTQUFTLEdBQUcsV0FBVyxDQUFDLFdBQVcsQ0FBQTtRQUV2QyxJQUFJLEtBQUssR0FBRyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUE7UUFDakQsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNSLE1BQU0sQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ2xDLENBQUM7SUFDTCxDQUFDO0lBRU0sTUFBTSxDQUFDLE1BQU0sQ0FBRSxHQUFlO1FBQ2pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUE7SUFDL0MsQ0FBQztJQUVNLE1BQU0sQ0FBQyxRQUFRLENBQUUsR0FBZTtRQUNuQyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FB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","import { Loader, Logger } from '../sgvizler';\nexport class Dependency {\n    constructor(url, loadBefore) {\n        this.url = url;\n        this.loadBefore = loadBefore ? loadBefore : null;\n        this.endDownload = false;\n        this.startDownload = false;\n    }\n    load() {\n        if (!this.isLoaded()) {\n            this.startDownload = true;\n            Logger.log('Load started :' + this.url);\n            Loader.load(this);\n        }\n    }\n    isLoaded() {\n        if (Loader.isLoaded(this)) {\n            this.startDownload = true;\n            this.endDownload = true;\n        }\n        return this.endDownload;\n    }\n    callBack() {\n        this.endDownload = true;\n        Logger.log('Load ended :' + this.url);\n    }\n}\nexport class ScriptDependency extends Dependency {\n}\nexport class CssDependency extends Dependency {\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVwZW5kZW5jeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZ3Zpemxlci9EZXBlbmRlbmN5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDSCxNQUFNLEVBQ04sTUFBTSxFQUNULE1BQU0sYUFBYSxDQUFBO0FBRXBCLE1BQU07SUFNRixZQUFhLEdBQVcsRUFBQyxVQUF1QjtRQUM1QyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQTtRQUNkLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxHQUFHLFVBQVUsR0FBRyxJQUFJLENBQUE7UUFDaEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUE7UUFDeEIsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUE7SUFDOUIsQ0FBQztJQUVNLElBQUk7UUFDUCxFQUFFLENBQUMsQ0FBQyxDQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDcEIsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUE7WUFDekIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDdkMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNyQixDQUFDO0lBQ0wsQ0FBQztJQUVNLFFBQVE7UUFDWCxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4QixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQTtZQUN6QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQTtRQUMzQixDQUFDO1FBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUE7SUFDM0IsQ0FBQztJQUVNLFFBQVE7UUFDWCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQTtRQUN2QixNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDekMsQ0FBQztDQUNKO0FBRUQsTUFBTSx1QkFBd0IsU0FBUSxVQUFVO0NBQUc7QUFFbkQsTUFBTSxvQkFBcUIsU0FBUSxVQUFVO0NBQUcifQ==","/**\n * todo\n * @class sgvizler.SparqlError\n * @memberof sgvizler\n */\nexport class SparqlError {\n    static getErrorMessage(xhr) {\n        let patternWikidata = /MalformedQueryException: *(.*)/m; // tslint:disable-line\n        let errorWikidata = patternWikidata.exec(xhr.response);\n        if (errorWikidata !== null) {\n            return errorWikidata[1];\n        }\n        return xhr.response;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3BhcnFsRXJyb3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2d2aXpsZXIvU3BhcnFsRXJyb3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUNILE1BQU07SUFFSyxNQUFNLENBQUMsZUFBZSxDQUFFLEdBQW1CO1FBQzlDLElBQUksZUFBZSxHQUFHLGlDQUFpQyxDQUFBLENBQUMsc0JBQXNCO1FBRTlFLElBQUksYUFBYSxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQ3RELEVBQUUsQ0FBQyxDQUFDLGFBQWEsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDM0IsQ0FBQztRQUVELE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFBO0lBQ3ZCLENBQUM7Q0FDSiJ9","import * as tslib_1 from \"tslib\";\nimport { Tools, Core } from '../sgvizler';\n/**\n *\n * @memberof gvizler\n */\nexport class Select {\n    /**\n     *\n     * @param {string} elementID\n     * @returns {Promise<void>}\n     */\n    static drawWithElementId(elementID) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            let element = document.getElementById(elementID);\n            if (element) {\n                yield Select.draw(element);\n            }\n        });\n    }\n    /**\n     *\n     * @param {Element} element\n     * @param options\n     * @returns {Promise<void>}\n     */\n    static draw(element, options) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            let nodesOption = Select.getSelectOptions(options);\n            for (let node of nodesOption) {\n                element.appendChild(node.cloneNode(true));\n            }\n        });\n    }\n    /**\n     * todo\n     */\n    static drawAll() {\n        let nodesOption = Select.getSelectOptions();\n        let nodesSnapshot = document.evaluate(\"//select[contains(@class, '\" + Select.CLASS_NAME + \"')]\", document, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null);\n        for (let i = 0; i < nodesSnapshot.snapshotLength; i++) {\n            for (let node of nodesOption) {\n                nodesSnapshot.snapshotItem(i).appendChild(node.cloneNode(true));\n            }\n        }\n    }\n    /**\n     * Build url of chart's doc\n     * @param {string} classFullName\n     * @param {string} pathDoc\n     * @returns {string} absolute or relative URL\n     */\n    static getChartDoc(classFullName, pathDoc) {\n        let chartClass = Tools.getObjectByPath(classFullName);\n        let path = '';\n        if (pathDoc !== undefined) {\n            path = pathDoc;\n        }\n        else {\n            path = Core.DOCPATH;\n        }\n        return path + chartClass.tutorialFilename;\n    }\n    static getSelectOptions(options) {\n        let chartClass;\n        let nodeOption;\n        let nodeOptgroup;\n        let attrLabel;\n        let attrValue;\n        let attrIcon;\n        let attrSub;\n        let attrSelected;\n        let nodes = [];\n        // todo: write the option selected in the doc\n        let classSelected = options && options.selected ? options.selected : this.classOfChartSelectedByDefault;\n        for (let optgroup of this.charts) {\n            nodeOptgroup = document.createElement('optgroup');\n            attrLabel = document.createAttribute('label');\n            attrLabel.value = optgroup.label;\n            nodeOptgroup.setAttributeNode(attrLabel);\n            for (let chart of optgroup.charts) {\n                chartClass = Tools.getObjectByPath(chart);\n                nodeOption = document.createElement('option');\n                attrIcon = document.createAttribute('data-icon');\n                attrIcon.value = chartClass.icon;\n                attrSub = document.createAttribute('data-subtext');\n                // todo: write the option subtext in the doc\n                if (options.subtext === 'classFullName') {\n                    attrSub.value = chartClass.classFullName;\n                }\n                else {\n                    attrSub.value = chartClass.subtext;\n                }\n                attrValue = document.createAttribute('value');\n                attrValue.value = chartClass.classFullName;\n                if (classSelected === chart) {\n                    attrSelected = document.createAttribute('selected');\n                    nodeOption.setAttributeNode(attrSelected);\n                }\n                nodeOption.text = chartClass.label;\n                nodeOption.setAttributeNode(attrIcon);\n                nodeOption.setAttributeNode(attrSub);\n                nodeOption.setAttributeNode(attrValue);\n                nodeOptgroup.appendChild(nodeOption);\n            }\n            nodes.push(nodeOptgroup);\n        }\n        return nodes;\n    }\n}\nSelect.CLASS_NAME = 'sgvizler-select';\nSelect.classOfChartSelectedByDefault = 'bordercloud.visualization.DataTable';\n/**\n * Stores the charts\n */\nSelect.charts = [\n    {\n        // optgroup\n        label: 'bordercloud.visualization',\n        charts: [\n            'bordercloud.visualization.DataTable'\n        ]\n    },\n    {\n        // optgroup\n        label: 'd3.visualization',\n        charts: [\n            'd3.visualization.Pie'\n        ]\n    },\n    {\n        // optgroup\n        label: 'leaflet.visualization',\n        charts: [\n            'leaflet.visualization.Map'\n        ]\n    },\n    {\n        // optgroup\n        label: 'google.visualization',\n        charts: [\n            'google.visualization.Table',\n            'google.visualization.Map'\n        ]\n    },\n    {\n        // optgroup\n        label: 'sgvizler.visualization',\n        charts: [\n            'sgvizler.visualization.Table'\n        ]\n    }\n];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Nndml6bGVyL1NlbGVjdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNILEtBQUssRUFFTCxJQUFJLEVBQ1AsTUFBTSxhQUFhLENBQUE7QUFFcEI7OztHQUdHO0FBQ0gsTUFBTTtJQWdERjs7OztPQUlHO0lBQ0ksTUFBTSxDQUFPLGlCQUFpQixDQUFFLFNBQWlCOztZQUNwRCxJQUFJLE9BQU8sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1lBQ2hELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQ1YsTUFBTSxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBQzlCLENBQUM7UUFDTCxDQUFDO0tBQUE7SUFFRDs7Ozs7T0FLRztJQUNJLE1BQU0sQ0FBTyxJQUFJLENBQUUsT0FBZ0IsRUFBQyxPQUFhOztZQUNwRCxJQUFJLFdBQVcsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUE7WUFDbEQsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQztnQkFDM0IsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUE7WUFDN0MsQ0FBQztRQUNMLENBQUM7S0FBQTtJQUVEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLE9BQU87UUFDakIsSUFBSSxXQUFXLEdBQUcsTUFBTSxDQUFDLGdCQUFnQixFQUFFLENBQUE7UUFFM0MsSUFBSSxhQUFhLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyw2QkFBNkIsR0FBRyxNQUFNLENBQUMsVUFBVSxHQUFHLEtBQUssRUFDM0YsUUFBUSxFQUFFLElBQUksRUFBRSxXQUFXLENBQUMsNEJBQTRCLEVBQUUsSUFBSSxDQUFFLENBQUE7UUFDcEUsR0FBRyxDQUFDLENBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHLENBQUMsR0FBRyxhQUFhLENBQUMsY0FBYyxFQUFFLENBQUMsRUFBRSxFQUFHLENBQUM7WUFDdkQsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQztnQkFDM0IsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFBO1lBQ25FLENBQUM7UUFDTCxDQUFDO0lBQ0wsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ksTUFBTSxDQUFDLFdBQVcsQ0FBRSxhQUFxQixFQUFDLE9BQWdCO1FBQzdELElBQUksVUFBVSxHQUFHLEtBQUssQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFVLENBQUE7UUFFOUQsSUFBSSxJQUFJLEdBQVcsRUFBRSxDQUFBO1FBRXJCLEVBQUUsQ0FBQyxDQUFDLE9BQU8sS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLElBQUksR0FBRyxPQUFPLENBQUE7UUFDbEIsQ0FBQztRQUFBLElBQUksQ0FBQyxDQUFDO1lBQ0gsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7UUFDdkIsQ0FBQztRQUVELE1BQU0sQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDLGdCQUFnQixDQUFBO0lBQzdDLENBQUM7SUFFTyxNQUFNLENBQUMsZ0JBQWdCLENBQUUsT0FBYTtRQUMxQyxJQUFJLFVBQVUsQ0FBQTtRQUNkLElBQUksVUFBVSxDQUFBO1FBQ2QsSUFBSSxZQUFZLENBQUE7UUFDaEIsSUFBSSxTQUFTLENBQUE7UUFDYixJQUFJLFNBQVMsQ0FBQTtRQUNiLElBQUksUUFBUSxDQUFBO1FBQ1osSUFBSSxPQUFPLENBQUE7UUFDWCxJQUFJLFlBQVksQ0FBQTtRQUNoQixJQUFJLEtBQUssR0FBZ0IsRUFBRSxDQUFBO1FBRTNCLDZDQUE2QztRQUM3QyxJQUFJLGFBQWEsR0FBRyxPQUFPLElBQUksT0FBTyxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyw2QkFBNkIsQ0FBQTtRQUN2RyxHQUFHLENBQUMsQ0FBQyxJQUFJLFFBQVEsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUUvQixZQUFZLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQTtZQUNqRCxTQUFTLEdBQUcsUUFBUSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQTtZQUM3QyxTQUFTLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUE7WUFDaEMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFBO1lBRXhDLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxJQUFJLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUNoQyxVQUFVLEdBQUcsS0FBSyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQVUsQ0FBQTtnQkFDbEQsVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUE7Z0JBQzdDLFFBQVEsR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQyxDQUFBO2dCQUNoRCxRQUFRLENBQUMsS0FBSyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUE7Z0JBQ2hDLE9BQU8sR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLGNBQWMsQ0FBQyxDQUFBO2dCQUNsRCw0Q0FBNEM7Z0JBQzVDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEtBQUssZUFBZSxDQUFDLENBQUMsQ0FBQztvQkFDdEMsT0FBTyxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUMsYUFBYSxDQUFBO2dCQUM1QyxDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNKLE9BQU8sQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQTtnQkFDdEMsQ0FBQztnQkFDRCxTQUFTLEdBQUcsUUFBUSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQTtnQkFDN0MsU0FBUyxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUMsYUFBYSxDQUFBO2dCQUUxQyxFQUFFLENBQUMsQ0FBQyxhQUFhLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQztvQkFDMUIsWUFBWSxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLENBQUE7b0JBQ25ELFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLENBQUMsQ0FBQTtnQkFDN0MsQ0FBQztnQkFDRCxVQUFVLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUE7Z0JBQ2xDLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQTtnQkFDckMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFBO2dCQUNwQyxVQUFVLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUE7Z0JBQ3RDLFlBQVksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUE7WUFDeEMsQ0FBQztZQUNELEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUE7UUFDNUIsQ0FBQztRQUNELE1BQU0sQ0FBQyxLQUFLLENBQUE7SUFDaEIsQ0FBQzs7QUEzSnVCLGlCQUFVLEdBQVcsaUJBQWlCLENBQUE7QUFFL0Msb0NBQTZCLEdBQVcscUNBQXFDLENBQUE7QUFFNUY7O0dBRUc7QUFDWSxhQUFNLEdBQUc7SUFDcEI7UUFDSSxXQUFXO1FBQ1gsS0FBSyxFQUFFLDJCQUEyQjtRQUNsQyxNQUFNLEVBQUU7WUFDSixxQ0FBcUM7U0FDeEM7S0FDSjtJQUNEO1FBQ0ksV0FBVztRQUNYLEtBQUssRUFBRSxrQkFBa0I7UUFDekIsTUFBTSxFQUFFO1lBQ0osc0JBQXNCO1NBQ3pCO0tBQ0o7SUFDRDtRQUNJLFdBQVc7UUFDWCxLQUFLLEVBQUUsdUJBQXVCO1FBQzlCLE1BQU0sRUFBRTtZQUNKLDJCQUEyQjtTQUM5QjtLQUNKO0lBQ0Q7UUFDSSxXQUFXO1FBQ1gsS0FBSyxFQUFFLHNCQUFzQjtRQUM3QixNQUFNLEVBQUU7WUFDSiw0QkFBNEI7WUFDNUIsMEJBQTBCO1NBQzdCO0tBQ0o7SUFDRDtRQUNJLFdBQVc7UUFDWCxLQUFLLEVBQUUsd0JBQXdCO1FBQy9CLE1BQU0sRUFDRjtZQUNJLDhCQUE4QjtTQUNqQztLQUNSO0NBQ0osQ0FBQSJ9","/**\n * todo\n * @class sgvizler.MESSAGES\n * @memberof sgvizler\n */\nexport var MESSAGES;\n(function (MESSAGES) {\n    MESSAGES[MESSAGES[\"ERROR_CHART_UNKNOWN\"] = 0] = \"ERROR_CHART_UNKNOWN\";\n    MESSAGES[MESSAGES[\"ERROR_CHART_PATTERN_OPTION_UNKNOWN\"] = 1] = \"ERROR_CHART_PATTERN_OPTION_UNKNOWN\";\n    MESSAGES[MESSAGES[\"ERROR_REQUEST\"] = 2] = \"ERROR_REQUEST\";\n    MESSAGES[MESSAGES[\"ERROR_CHART\"] = 3] = \"ERROR_CHART\";\n    MESSAGES[MESSAGES[\"ERROR_DEPENDENCIES\"] = 4] = \"ERROR_DEPENDENCIES\";\n    MESSAGES[MESSAGES[\"ERROR_ENDPOINT_FORGOT\"] = 5] = \"ERROR_ENDPOINT_FORGOT\";\n    MESSAGES[MESSAGES[\"ERROR_DATA_EMPTY\"] = 6] = \"ERROR_DATA_EMPTY\";\n})(MESSAGES || (MESSAGES = {}));\n/**\n *\n * @class sgvizler.Messages\n * @memberof sgvizler\n */\nexport class Messages {\n    static get(id, args) {\n        let message = '';\n        switch (id) {\n            case MESSAGES.ERROR_CHART_UNKNOWN:\n                message = 'The chart $0 does not exist.';\n                break;\n            case MESSAGES.ERROR_CHART_PATTERN_OPTION_UNKNOWN:\n                message = \"The pattern of chart options is unknown : '$0'\" +\n                    \"Use 'variable1=value1|variable1=value1' or for style 'width:100%;font:red;' or 'class1 class2'\";\n                break;\n            case MESSAGES.ERROR_REQUEST:\n                message = 'Sorry, the sparql server sent an error. </br> $0';\n                break;\n            case MESSAGES.ERROR_CHART:\n                message = 'Sorry, the chart sent an error. </br> $0';\n                break;\n            case MESSAGES.ERROR_DEPENDENCIES:\n                message = 'The chart dependencies sent an error. </br> $0';\n                break;\n            case MESSAGES.ERROR_ENDPOINT_FORGOT:\n                message = 'The endpoint of Sparql service is forgotten (data-sgvizler-endpoint).';\n                break;\n            case MESSAGES.ERROR_DATA_EMPTY:\n                message = 'The resquest sent null.';\n                break;\n        }\n        if (args) {\n            for (let i = 0, len = args.length; i < len; i++) {\n                message = message.replace('$' + i, args[i]);\n            }\n        }\n        return message;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVzc2FnZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2d2aXpsZXIvTWVzc2FnZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUNILE1BQU0sQ0FBTixJQUFZLFFBUVg7QUFSRCxXQUFZLFFBQVE7SUFDaEIscUVBQW1CLENBQUE7SUFDbkIsbUdBQWtDLENBQUE7SUFDbEMseURBQWEsQ0FBQTtJQUNiLHFEQUFXLENBQUE7SUFDWCxtRUFBa0IsQ0FBQTtJQUNsQix5RUFBcUIsQ0FBQTtJQUNyQiwrREFBZ0IsQ0FBQTtBQUNwQixDQUFDLEVBUlcsUUFBUSxLQUFSLFFBQVEsUUFRbkI7QUFFRDs7OztHQUlHO0FBQ0gsTUFBTTtJQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUUsRUFBWSxFQUFDLElBQW9CO1FBQ2hELElBQUksT0FBTyxHQUFHLEVBQUUsQ0FBQTtRQUNoQixNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ1QsS0FBSyxRQUFRLENBQUMsbUJBQW1CO2dCQUM3QixPQUFPLEdBQUcsOEJBQThCLENBQUE7Z0JBQ3hDLEtBQUssQ0FBQTtZQUNULEtBQUssUUFBUSxDQUFDLGtDQUFrQztnQkFDNUMsT0FBTyxHQUFHLGdEQUFnRDtvQkFDdEQsZ0dBQWdHLENBQUE7Z0JBQ3BHLEtBQUssQ0FBQTtZQUNULEtBQUssUUFBUSxDQUFDLGFBQWE7Z0JBQ3ZCLE9BQU8sR0FBRyxrREFBa0QsQ0FBQTtnQkFDNUQsS0FBSyxDQUFBO1lBQ1QsS0FBSyxRQUFRLENBQUMsV0FBVztnQkFDckIsT0FBTyxHQUFHLDBDQUEwQyxDQUFBO2dCQUNwRCxLQUFLLENBQUE7WUFDVCxLQUFLLFFBQVEsQ0FBQyxrQkFBa0I7Z0JBQzVCLE9BQU8sR0FBRyxnREFBZ0QsQ0FBQTtnQkFDMUQsS0FBSyxDQUFBO1lBQ1QsS0FBSyxRQUFRLENBQUMscUJBQXFCO2dCQUMvQixPQUFPLEdBQUcsdUVBQXVFLENBQUE7Z0JBQ2pGLEtBQUssQ0FBQTtZQUNULEtBQUssUUFBUSxDQUFDLGdCQUFnQjtnQkFDMUIsT0FBTyxHQUFHLHlCQUF5QixDQUFBO2dCQUNuQyxLQUFLLENBQUE7UUFDYixDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNQLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQzlDLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDL0MsQ0FBQztRQUNMLENBQUM7UUFFRCxNQUFNLENBQUMsT0FBTyxDQUFBO0lBQ2xCLENBQUM7Q0FDSiJ9","import * as sgvizler2 from '../index';\n/**\n * Todo comment\n * @class sgvizler.Tools\n * @memberof sgvizler\n */\nexport class Tools {\n    // noinspection JSValidateJSDoc\n    /**\n     * Gets the object located at `path` from `object`. `path`\n     * is given in dot notation.\n     * Search in first in the library and after in window object\n     * @param {string} path\n     * @param object\n     * @returns { any }  or undefined\n     */\n    static getObjectByPath(path, object) {\n        let i;\n        let len;\n        let segments = path.split('.');\n        let cursor = object || sgvizler2; // search in the lib if object is empty\n        for (i = 0, len = segments.length; i < len; i += 1) {\n            if (cursor === undefined) {\n                break;\n            }\n            if (i < len - 1) {\n                cursor = cursor[segments[i]]; // if cursor is undefined, it remains undefined.\n            }\n            else {\n                try {\n                    cursor = new cursor[segments[i]](); // create an instance\n                }\n                catch (e) {\n                    // do nothing\n                    // cursor[segments[i]]() is not a constructor]\n                    cursor = undefined;\n                }\n            }\n        }\n        if (cursor === undefined && !object) {\n            cursor = this.getObjectByPath(path, window);\n        }\n        return cursor;\n    }\n    static escapeHtml(str) {\n        let text = document.createTextNode(str);\n        let div = document.createElement('div');\n        div.appendChild(text);\n        return div.innerHTML;\n    }\n    static decodeHtml(html) {\n        let element = document.createElement('div');\n        element.innerHTML = html;\n        return element.textContent;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9vbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2d2aXpsZXIvVG9vbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLLFNBQVMsTUFBTSxVQUFVLENBQUE7QUFFckM7Ozs7R0FJRztBQUNILE1BQU07SUFFRiwrQkFBK0I7SUFDL0I7Ozs7Ozs7T0FPRztJQUNJLE1BQU0sQ0FBQyxlQUFlLENBQUUsSUFBWSxFQUFFLE1BQVk7UUFDckQsSUFBSSxDQUFDLENBQUE7UUFDTCxJQUFJLEdBQUcsQ0FBQTtRQUNQLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDOUIsSUFBSSxNQUFNLEdBQUcsTUFBTSxJQUFJLFNBQVMsQ0FBQSxDQUFFLHVDQUF1QztRQUV6RSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1lBQ2pELEVBQUUsQ0FBQyxDQUFDLE1BQU0sS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO2dCQUN4QixLQUFLLENBQUE7WUFDUixDQUFDO1lBQ0QsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNkLE1BQU0sR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBSyxnREFBZ0Q7WUFDckYsQ0FBQztZQUFBLElBQUksQ0FBQyxDQUFDO2dCQUNILElBQUksQ0FBQztvQkFDRCxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQSxDQUFDLHFCQUFxQjtnQkFDNUQsQ0FBQztnQkFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNSLGFBQWE7b0JBQ2IsOENBQThDO29CQUM5QyxNQUFNLEdBQUcsU0FBUyxDQUFBO2dCQUN0QixDQUFDO1lBQ0wsQ0FBQztRQUNMLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxNQUFNLEtBQUssU0FBUyxJQUFJLENBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNuQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDL0MsQ0FBQztRQUNELE1BQU0sQ0FBQyxNQUFNLENBQUE7SUFDakIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxVQUFVLENBQUUsR0FBVztRQUNqQyxJQUFJLElBQUksR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3ZDLElBQUksR0FBRyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDdkMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNyQixNQUFNLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQTtJQUN4QixDQUFDO0lBRU0sTUFBTSxDQUFDLFVBQVUsQ0FBRSxJQUFZO1FBQ2xDLElBQUksT0FBTyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDM0MsT0FBTyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUE7UUFDeEIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUE7SUFDOUIsQ0FBQztDQUNKIn0=","import * as S from '../sgvizler';\n/**\n * Handles all logging, either to console or designated HTML\n * container.\n *\n * @class sgvizler.Logger\n * @memberof sgvizler\n */\nexport class Logger {\n    /**\n     * Logs a message.\n     * @method log\n     * @protected\n     * @param {string} message The message to log.\n     */\n    static log(message) {\n        console.log(this.elapsedTime() + 's: ' + message);\n    }\n    /**\n     * Todo\n     * @param {Container} container\n     * @param {MESSAGES} messageName\n     * @param {Array<string>} args\n     */\n    static displayFeedback(container, messageName, args) {\n        let message = S.Messages.get(messageName, args);\n        if (container.loglevel === 2) {\n            if (message) {\n                let obj = document.getElementById(container.id);\n                if (obj) {\n                    obj.innerHTML = \"<p style='color:red'>\" + message + '</p>';\n                }\n            }\n        }\n    }\n    /**\n     * @method timeElapsed\n     * @private\n     * @return {number} The number of seconds elapsed since\n     * this sgvizler got loaded.\n     */\n    static elapsedTime() {\n        return (Date.now() - this._startTime) / 1000;\n    }\n}\n/**\n * The timestamp for the load start of the current running\n * version of sgvizler. Used to calculate time elapse of\n * future events.\n */\nLogger._startTime = Date.now();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9nZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Nndml6bGVyL0xvZ2dlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssQ0FBQyxNQUFNLGFBQWEsQ0FBQTtBQUVoQzs7Ozs7O0dBTUc7QUFDSCxNQUFNO0lBUUY7Ozs7O09BS0c7SUFDSSxNQUFNLENBQUMsR0FBRyxDQUFFLE9BQWU7UUFDOUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEdBQUcsS0FBSyxHQUFHLE9BQU8sQ0FBQyxDQUFBO0lBQ3JELENBQUM7SUFFRDs7Ozs7T0FLRztJQUNJLE1BQU0sQ0FBQyxlQUFlLENBQUUsU0FBc0IsRUFBRSxXQUF1QixFQUFFLElBQW9CO1FBQ2hHLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBQyxJQUFJLENBQUMsQ0FBQTtRQUU5QyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDM0IsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDVixJQUFJLEdBQUcsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQTtnQkFDL0MsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztvQkFDTixHQUFHLENBQUMsU0FBUyxHQUFHLHVCQUF1QixHQUFHLE9BQU8sR0FBRyxNQUFNLENBQUE7Z0JBQzlELENBQUM7WUFDTCxDQUFDO1FBQ0wsQ0FBQztJQUNMLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNLLE1BQU0sQ0FBQyxXQUFXO1FBQ3RCLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsSUFBSSxDQUFBO0lBQ2hELENBQUM7O0FBNUNEOzs7O0dBSUc7QUFDWSxpQkFBVSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQSJ9","/**\n *\n * @class sgvizler.Core\n * @memberof sgvizler\n */\nexport class Core {\n}\n/**\n * The version number of this sgvizler2.\n * @static\n * @readonly\n * @type {string} VERSION\n */\nCore.VERSION = '0.0';\n/**\n * sgvizler2's homepage.\n * @static\n * @readonly\n * @type {string} HOMEPAGE\n */\nCore.HOMEPAGE = 'https://bordercloud.github.io/sgvizler2/index.html';\n/**\n * sgvizler2's docs path\n * @static\n * @readonly\n * @type {string} DOCPATH\n */\nCore.DOCPATH = 'https://bordercloud.github.io/sgvizler2/';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29yZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZ3Zpemxlci9Db3JlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7QUFDSCxNQUFNOztBQUVGOzs7OztHQUtHO0FBQ29CLFlBQU8sR0FBVyxLQUFLLENBQUE7QUFFOUM7Ozs7O0dBS0c7QUFDb0IsYUFBUSxHQUFXLG9EQUFvRCxDQUFBO0FBRTlGOzs7OztHQUtHO0FBQ29CLFlBQU8sR0FBVywwQ0FBMEMsQ0FBQSJ9","/**\n *\n * @class sgvizler.SPARQL_RESULT\n * @memberof sgvizler\n */\nexport var SPARQL_RESULT;\n(function (SPARQL_RESULT) {\n    SPARQL_RESULT[SPARQL_RESULT[\"xml\"] = 0] = \"xml\";\n    SPARQL_RESULT[SPARQL_RESULT[\"json\"] = 1] = \"json\";\n    SPARQL_RESULT[SPARQL_RESULT[\"jsonp\"] = 2] = \"jsonp\";\n})(SPARQL_RESULT || (SPARQL_RESULT = {}));\n/**\n *\n * @class sgvizler.SparqlTools\n * @memberof gvizler\n */\nexport class SparqlTools {\n    static getOutputLabel(id) {\n        let str = '';\n        switch (id) {\n            case SPARQL_RESULT.xml:\n                str = 'xml';\n                break;\n            case SPARQL_RESULT.json:\n                str = 'json';\n                break;\n            case SPARQL_RESULT.jsonp:\n                str = 'jsonp';\n                break;\n        }\n        return str;\n    }\n    static getXMLHttpRequestResponseType(id) {\n        let type = '';\n        switch (id) {\n            case SPARQL_RESULT.xml:\n                type = ''; // \tDOMString (this is the default value for xhr)\n                break;\n            case SPARQL_RESULT.json:\n            case SPARQL_RESULT.jsonp:\n                type = 'json';\n                break;\n        }\n        return type;\n    }\n    static getHeaderAccept(id) {\n        let str = '';\n        switch (id) {\n            case SPARQL_RESULT.xml:\n                str = 'application/sparql-results+xml';\n                break;\n            case SPARQL_RESULT.json:\n            case SPARQL_RESULT.jsonp:\n                str = 'application/sparql-results+json';\n                break;\n        }\n        return str;\n    }\n    static convertString(label) {\n        let result = SPARQL_RESULT.json;\n        switch (label) {\n            case 'xml':\n                result = SPARQL_RESULT.xml;\n                break;\n            case 'json':\n                result = SPARQL_RESULT.json;\n                break;\n            case 'jsonp':\n                result = SPARQL_RESULT.jsonp;\n                break;\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3BhcnFsVG9vbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2d2aXpsZXIvU3BhcnFsVG9vbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUNILE1BQU0sQ0FBTixJQUFZLGFBSVg7QUFKRCxXQUFZLGFBQWE7SUFDckIsK0NBQUcsQ0FBQTtJQUNILGlEQUFJLENBQUE7SUFDSixtREFBSyxDQUFBO0FBQ1QsQ0FBQyxFQUpXLGFBQWEsS0FBYixhQUFhLFFBSXhCO0FBRUQ7Ozs7R0FJRztBQUNILE1BQU07SUFFSyxNQUFNLENBQUMsY0FBYyxDQUFFLEVBQWlCO1FBQzNDLElBQUksR0FBRyxHQUFXLEVBQUUsQ0FBQTtRQUNwQixNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ1QsS0FBSyxhQUFhLENBQUMsR0FBRztnQkFDbEIsR0FBRyxHQUFHLEtBQUssQ0FBQTtnQkFDWCxLQUFLLENBQUE7WUFDVCxLQUFLLGFBQWEsQ0FBQyxJQUFJO2dCQUNuQixHQUFHLEdBQUcsTUFBTSxDQUFBO2dCQUNaLEtBQUssQ0FBQTtZQUNULEtBQUssYUFBYSxDQUFDLEtBQUs7Z0JBQ3BCLEdBQUcsR0FBRyxPQUFPLENBQUE7Z0JBQ2IsS0FBSyxDQUFBO1FBQ2IsQ0FBQztRQUNELE1BQU0sQ0FBQyxHQUFHLENBQUE7SUFDZCxDQUFDO0lBRU0sTUFBTSxDQUFDLDZCQUE2QixDQUFFLEVBQWlCO1FBQzFELElBQUksSUFBSSxHQUFXLEVBQUUsQ0FBQTtRQUNyQixNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ1QsS0FBSyxhQUFhLENBQUMsR0FBRztnQkFDbEIsSUFBSSxHQUFHLEVBQUUsQ0FBQSxDQUFDLGlEQUFpRDtnQkFDM0QsS0FBSyxDQUFBO1lBQ1QsS0FBSyxhQUFhLENBQUMsSUFBSSxDQUFFO1lBQ3pCLEtBQUssYUFBYSxDQUFDLEtBQUs7Z0JBQ3BCLElBQUksR0FBRyxNQUFNLENBQUE7Z0JBQ2IsS0FBSyxDQUFBO1FBQ2IsQ0FBQztRQUNELE1BQU0sQ0FBQyxJQUFrQyxDQUFBO0lBQzdDLENBQUM7SUFFTSxNQUFNLENBQUMsZUFBZSxDQUFFLEVBQWlCO1FBQzVDLElBQUksR0FBRyxHQUFXLEVBQUUsQ0FBQTtRQUNwQixNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ1QsS0FBSyxhQUFhLENBQUMsR0FBRztnQkFDbEIsR0FBRyxHQUFHLGdDQUFnQyxDQUFBO2dCQUN0QyxLQUFLLENBQUE7WUFDVCxLQUFLLGFBQWEsQ0FBQyxJQUFJLENBQUU7WUFDekIsS0FBSyxhQUFhLENBQUMsS0FBSztnQkFDcEIsR0FBRyxHQUFHLGlDQUFpQyxDQUFBO2dCQUN2QyxLQUFLLENBQUE7UUFDYixDQUFDO1FBQ0QsTUFBTSxDQUFDLEdBQUcsQ0FBQTtJQUNkLENBQUM7SUFFTSxNQUFNLENBQUMsYUFBYSxDQUFFLEtBQWE7UUFDdEMsSUFBSSxNQUFNLEdBQWtCLGFBQWEsQ0FBQyxJQUFJLENBQUE7UUFDOUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNaLEtBQUssS0FBSztnQkFDTixNQUFNLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQTtnQkFDMUIsS0FBSyxDQUFBO1lBQ1QsS0FBSyxNQUFNO2dCQUNQLE1BQU0sR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFBO2dCQUMzQixLQUFLLENBQUE7WUFDVCxLQUFLLE9BQU87Z0JBQ1IsTUFBTSxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUE7Z0JBQzVCLEtBQUssQ0FBQTtRQUNiLENBQUM7UUFDRCxNQUFNLENBQUMsTUFBTSxDQUFBO0lBQ2pCLENBQUM7Q0FDSiJ9","import { SPARQL_RESULT, SparqlTools } from '../sgvizler';\nimport { SparqlError } from './SparqlError';\n/**\n * Important class. Runs SPARQL query against SPARQL\n * endpoints.\n *\n * Dependencies:\n *\n *   - sgvizler.util\n *   - sgvizler.namespace\n *   - sgvizler.registry\n *   - sgvizler.parser\n *   - sgvizler.loader\n *   - sgvizler.logger\n *   - sgvizler.defaults\n *   - jQuery\n *   - google.visualization\n *\n *\n * Example of how to use the Query class:\n *\n *     var sparqlQueryString = \"SELECT * {?s ?p ?o} LIMIT 10\",\n *         containerID = \"myElementID\",\n *         Q = new sgvizler.Query();\n *\n *     // Note that default values may be set in the sgvizler object.\n *     Q.query(sparqlQueryString)\n *         .endpointURL(\"http://dbpedia.org/sparql\")\n *         .endpointOutputFormat(\"json\")                    // Possible values 'xml', 'json', 'jsonp'.\n *         .chartFunction(\"google.visualization.BarChart\")  // The name of the function to draw the chart.\n *         .draw(containerID);                              // Draw the chart in the designated HTML element.\n *\n * @class sgvizler.Request\n * @memberof sgvizler\n */\nexport class Request {\n    constructor() {\n        this._query = '';\n        this._endpoint = '';\n        this._endpointOutputFormat = SPARQL_RESULT.json;\n        this._method = 'GET';\n        this.listeners = {};\n    }\n    // private _endpointResultsUrlPart: string\n    // // private _chartPathFunction: string\n    // private _endpointURL: string\n    /**\n     *\n     * @returns {string}\n     */\n    get method() {\n        return this._method;\n    }\n    /**\n     *\n     * @param {string} value\n     */\n    set method(value) {\n        this._method = value;\n    }\n    /**\n     *\n     * @returns {Container}\n     */\n    get container() {\n        return this._container;\n    }\n    /**\n     *\n     * @param {Container} value\n     */\n    set container(value) {\n        this._container = value;\n    }\n    /**\n     * Get query string.\n     * @method query\n     * @public\n     * @return {string}\n     */\n    get query() {\n        return this._query;\n    }\n    /**\n     * Set query string.\n     * @method query\n     * @public\n     * @chainable\n     * @param value\n     */\n    set query(value) {\n        this._query = value;\n    }\n    /**\n     * Get endpoint URL.\n     * @method endpointURL\n     * @public\n     * @return {string}\n     */\n    get endpoint() {\n        return this._endpoint;\n    }\n    /**\n     * Set endpoint URL.\n     * @method endpointURL\n     * @public\n     * @chainable\n     * @example\n     *     sgvizler.endpointURL('http://sparql.dbpedia.org');\n     *   sets this Query object's endpoint to DBpedia.\n     * @param value\n     */\n    set endpoint(value) {\n        this._endpoint = value;\n    }\n    /**\n     * Get endpoint output format.\n     * @method endpointOutputFormat\n     * @public\n     * @return {string}\n     */\n    get endpointOutputFormat() {\n        return this._endpointOutputFormat;\n    }\n    /**\n     * Set endpoint output format. Legal values are `'xml'`,\n     * `'json'`, `'jsonp'`.\n     * @method endpointOutputFormat\n     * @public\n     * @chainable\n     * @param value\n     */\n    set endpointOutputFormat(value) {\n        this._endpointOutputFormat = value;\n    }\n    sendRequest() {\n        let myRequest = this;\n        // Create new promise with the Promise() constructor;\n        // This has as its argument a function\n        // with two parameters, resolve and reject\n        return new Promise(function (resolve, reject) {\n            // Standard XHR to load an image\n            let xhr = new XMLHttpRequest();\n            let data;\n            let url = myRequest.endpoint;\n            if (myRequest.method.toLowerCase() === 'get') {\n                url += '?query=' + encodeURIComponent(myRequest.query) +\n                    '&output=' + SparqlTools.getOutputLabel(myRequest.endpointOutputFormat);\n            }\n            else {\n                data = {\n                    query: myRequest.query,\n                    output: SparqlTools.getOutputLabel(myRequest.endpointOutputFormat)\n                };\n            }\n            xhr.open(myRequest.method, url, true);\n            xhr.setRequestHeader('Accept', SparqlTools.getHeaderAccept(myRequest.endpointOutputFormat));\n            // hide errors xhr.responseType = SparqlTools.getXMLHttpRequestResponseType(myRequest.endpointOutputFormat)\n            // TODO check progress\n            xhr.onprogress = function (oEvent) {\n                if (oEvent.lengthComputable) {\n                    let percentComplete = (oEvent.loaded / oEvent.total) * 100;\n                    console.log('onprogress' + percentComplete);\n                }\n                else {\n                    // Impossible de calculer la progression puisque la taille totale est inconnue\n                }\n            };\n            // When the request loads, check whether it was successful\n            xhr.onload = function (options) {\n                if (xhr.readyState === XMLHttpRequest.DONE) {\n                    if (xhr.status === 200) {\n                        // If successful, resolve the promise by passing back the request response\n                        resolve(JSON.parse(xhr.response));\n                    }\n                    else {\n                        // If it fails, reject the promise with a error message\n                        reject(SparqlError.getErrorMessage(xhr));\n                    }\n                }\n            };\n            xhr.onerror = function (options) {\n                // Also deal with the case when the entire request fails to begin with\n                // This is probably a network error, so reject the promise with an appropriate message\n                reject(SparqlError.getErrorMessage(xhr));\n            };\n            xhr.onabort = function () {\n                reject(SparqlError.getErrorMessage(xhr));\n            };\n            // Send the request\n            if (data) {\n                xhr.send(data);\n            }\n            else {\n                xhr.send();\n            }\n            // console.log(myRequest.query)\n        });\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVxdWVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZ3Zpemxlci9SZXF1ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFSCxhQUFhLEVBQ2IsV0FBVyxFQUNkLE1BQU0sYUFBYSxDQUFBO0FBQ3BCLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFFM0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBZ0NHO0FBQ0gsTUFBTTtJQWdIRjtRQTVHUSxXQUFNLEdBQVcsRUFBRSxDQUFBO1FBQ25CLGNBQVMsR0FBVyxFQUFFLENBQUE7UUFDdEIsMEJBQXFCLEdBQWtCLGFBQWEsQ0FBQyxJQUFJLENBQUE7UUFDekQsWUFBTyxHQUFHLEtBQUssQ0FBQTtRQTBHbkIsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUE7SUFDdkIsQ0FBQztJQXpHRCwwQ0FBMEM7SUFDMUMsd0NBQXdDO0lBQ3hDLCtCQUErQjtJQUUvQjs7O09BR0c7SUFDSCxJQUFJLE1BQU07UUFDTixNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQTtJQUN2QixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsSUFBSSxNQUFNLENBQUUsS0FBYTtRQUNyQixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtJQUN4QixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsSUFBSSxTQUFTO1FBQ1QsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUE7SUFDMUIsQ0FBQztJQUVEOzs7T0FHRztJQUNILElBQUksU0FBUyxDQUFFLEtBQWdCO1FBQzNCLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFBO0lBQzNCLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILElBQUksS0FBSztRQUNMLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFBO0lBQ3RCLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxJQUFJLEtBQUssQ0FBRSxL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","import * as tslib_1 from \"tslib\";\nimport { Request, Tools, Logger, MESSAGES, SparqlTools } from '../sgvizler';\n/**\n *\n * @class sgvizler.\n * @memberof sgvizler\n */\nexport var CONTAINER_STATE;\n(function (CONTAINER_STATE) {\n    CONTAINER_STATE[CONTAINER_STATE[\"FAILED\"] = 0] = \"FAILED\";\n    CONTAINER_STATE[CONTAINER_STATE[\"LOADED\"] = 1] = \"LOADED\";\n    CONTAINER_STATE[CONTAINER_STATE[\"LOADING\"] = 2] = \"LOADING\";\n})(CONTAINER_STATE || (CONTAINER_STATE = {}));\n/**\n * Draws charts specified in HTML containers, here we call them\n * \"sgvizler-containers\".\n *\n * Example of use: The following sgvizler-container will be\n * selected by sgvizler due to the use of designated\n * attributes. The result is a pie chart (draw with\n * `google.visualization.PieChart`) showing the number of instance\n * per class in the endpoint at\n * `http://sws.ifi.uio.no/sparql/ndp`.\n *\n *     <div id=\"ex1\"\n *          data-sgvizler-endpoint=\"http://sws.ifi.uio.no/sparql/npd\"\n *          data-sgvizler-query=\"SELECT ?class (count(?instance) AS ?noOfInstances)\n *                               WHERE{ ?instance a ?class }\n *                               GROUP BY ?class\n *                               ORDER BY ?class\"\n *          data-sgvizler-chart=\"google.visualization.PieChart\"\n *          style=\"width:800px; height:400px;\"></div>\n *\n * These container must have an id attribute (or else sgvizler\n * will not know where to put the chart) and a query attribute (or\n * else the container will be ignored by sgvizler).\n *\n * Dependencies:\n *\n *  - sgvizler.util\n *  - sgvizler.loader\n *  - sgvizler.logger\n *  - sgvizler.Query\n *  - jQuery\n * @class sgvizler.Container\n * @memberof sgvizler\n */\nexport class Container {\n    /**\n     * Collects values designated for sgvizler in the given.\n     * See also property PREFIX.\n     * @param {string} elementID The ID for which the attributes should be collected.\n     */\n    constructor(elementID) {\n        this._chartOptions = '';\n        this._chartName = '';\n        this._loglevel = 0;\n        this._id = '';\n        // step 1 : read parameters and create the object Query\n        // pre-condition\n        let element = document.getElementById(elementID);\n        if (element === null) {\n            throw new Error('elementID unknown : ' + elementID);\n        }\n        let self = Container;\n        this._state = CONTAINER_STATE.LOADING;\n        let elmAttrs = element.attributes;\n        // read basic parameters\n        if (elmAttrs[self.LOG_LEVEL_ATTRIBUTE_NAME]) {\n            this._loglevel = parseInt(elmAttrs[self.LOG_LEVEL_ATTRIBUTE_NAME].value, 10);\n        }\n        if (elmAttrs[self.CHART_ATTRIBUTE_NAME]) {\n            this._chartName = elmAttrs[self.CHART_ATTRIBUTE_NAME].value;\n        }\n        if (elmAttrs[self.CHART_OPTION_ATTRIBUTE_NAME]) {\n            this._chartOptions = elmAttrs[self.CHART_OPTION_ATTRIBUTE_NAME].value;\n        }\n        // build request object\n        let request = new Request();\n        request.container = this;\n        this._id = elementID;\n        if (elmAttrs[self.QUERY_ATTRIBUTE_NAME]) {\n            request.query = elmAttrs[self.QUERY_ATTRIBUTE_NAME].value;\n        }\n        if (elmAttrs[self.ENDPOINT_ATTRIBUTE_NAME]) {\n            request.endpoint = elmAttrs[self.ENDPOINT_ATTRIBUTE_NAME].value;\n        }\n        else {\n            this._state = CONTAINER_STATE.FAILED;\n            Logger.displayFeedback(this, MESSAGES.ERROR_ENDPOINT_FORGOT);\n            return;\n        }\n        // TODO : IMPORTANT FORMAT\n        if (elmAttrs[self.OUTPUT_FORMAT_ATTRIBUTE_NAME]) {\n            request.endpointOutputFormat = SparqlTools.convertString(elmAttrs[self.OUTPUT_FORMAT_ATTRIBUTE_NAME].value);\n        }\n        if (elmAttrs[self.OUTPUT_METHOD_ATTRIBUTE_NAME]) {\n            request.method = elmAttrs[self.OUTPUT_METHOD_ATTRIBUTE_NAME].value;\n        }\n        this._request = request;\n        // build the chart object\n        let chart = Tools.getObjectByPath(this.chartName);\n        if (chart === undefined) {\n            this._state = CONTAINER_STATE.FAILED;\n            Logger.displayFeedback(this, MESSAGES.ERROR_CHART_UNKNOWN, [this.chartName]);\n        }\n        else {\n            chart.container = this;\n            // read with and height of container before chart options\n            try {\n                let element = $('#' + elementID);\n                let widthCss = element.css('width');\n                let heightCss = element.css('height');\n                if (widthCss !== null) {\n                    chart.width = widthCss;\n                }\n                if (heightCss !== null && heightCss !== '0px') {\n                    chart.height = heightCss;\n                }\n            }\n            catch (e) {\n                // do nothing, unit test not support jquery\n            }\n            // read options (and replace may be with and height)\n            chart.optionsRaw = this._chartOptions;\n            this._chart = chart;\n        }\n    }\n    /**\n     * Draws the sgvizler-containers with the given element id.\n     * @method containerDraw\n     * @param {string} elementID\n     * @param options\n     * @returns {Promise<void>}\n     */\n    static drawWithElementId(elementID, options) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            let container = new Container(elementID);\n            // console.log(container)\n            Logger.log('drawing id: ' + elementID);\n            yield container.draw();\n        });\n    }\n    // noinspection JSValidateJSDoc\n    /**\n     * Draws all sgvizler-containers on page.\n     * @returns {Promise<any>}\n     */\n    static drawAll() {\n        let promisesArray = [];\n        let ids = [];\n        let iterator = document.evaluate('//div[@' + Container.PREFIX + 'query]/@id', document, null, XPathResult.ANY_TYPE, null);\n        let thisNode = iterator.iterateNext();\n        while (thisNode) {\n            ids.push(thisNode.value);\n            thisNode = iterator.iterateNext();\n        }\n        for (let id of ids) {\n            promisesArray.push(Container.drawWithElementId(id));\n        }\n        return Promise.all(promisesArray);\n    }\n    static loadDependenciesId(elementID, options) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            let container = new Container(elementID);\n            // console.log(container)\n            Logger.log('Load dependencies id: ' + elementID);\n            yield container.loadDependencies();\n        });\n    }\n    static loadAllDependencies() {\n        let promisesArray = [];\n        let ids = [];\n        let iterator = document.evaluate('//div[@' + Container.PREFIX + 'query]/@id', document, null, XPathResult.ANY_TYPE, null);\n        let thisNode = iterator.iterateNext();\n        while (thisNode) {\n            ids.push(thisNode.value);\n            thisNode = iterator.iterateNext();\n        }\n        for (let id of ids) {\n            promisesArray.push(Container.loadDependenciesId(id));\n        }\n        return Promise.all(promisesArray);\n    }\n    /**\n     *\n     * @param {string} elementID\n     * @param {string} endpoint\n     * @param {string} query\n     * @param {string} chartName\n     * @param {string} options\n     * @param {string} loglevel\n     * @returns {string}\n     */\n    static create(elementID, endpoint, query, chartName, options, loglevel\n        // ,  output:string=\"json\"\n    ) {\n        let element = document.getElementById(elementID);\n        if (element === null) {\n            throw new Error('elementID unknown : ' + elementID);\n        }\n        let self = Container;\n        let attrQuery = document.createAttribute(self.QUERY_ATTRIBUTE_NAME);\n        let attrEndpoint = document.createAttribute(self.ENDPOINT_ATTRIBUTE_NAME);\n        // let attrOutput = document.createAttribute(self.OUTPUT_FORMAT_ATTRIBUTE_NAME)\n        // let attrMethod = document.createAttribute(self.OUTPUT_METHOD_ATTRIBUTE_NAME)\n        let attrChart = document.createAttribute(self.CHART_ATTRIBUTE_NAME);\n        // attrQuery.value = Tools.escapeHtml(query)\n        attrQuery.value = query;\n        attrEndpoint.value = endpoint;\n        attrChart.value = chartName;\n        // attrOutput.value = output\n        element.setAttributeNode(attrQuery);\n        element.setAttributeNode(attrEndpoint);\n        // element.setAttributeNode(attrOutput)\n        // element.setAttributeNode(attrMethod)\n        element.setAttributeNode(attrChart);\n        if (options) {\n            let attrOptions = document.createAttribute(self.CHART_OPTION_ATTRIBUTE_NAME);\n            attrOptions.value = options;\n            element.setAttributeNode(attrOptions);\n        }\n        if (loglevel) {\n            let attrLevel = document.createAttribute(self.LOG_LEVEL_ATTRIBUTE_NAME);\n            attrLevel.value = loglevel;\n            element.setAttributeNode(attrLevel);\n        }\n        return element.innerHTML;\n    }\n    /**\n     *\n     * @returns {string}\n     */\n    get id() {\n        return this._id;\n    }\n    /**\n     * Get the name of chart object.\n     * @returns {string}\n     */\n    get chartName() {\n        return this._chartName;\n    }\n    ///////////////////////////////////// OPTIONS\n    /**\n     *\n     * @returns {string}\n     */\n    get chartOptions() {\n        return this._chartOptions;\n    }\n    /**\n     *\n     * @returns {Chart}\n     */\n    get chart() {\n        return this._chart;\n    }\n    /**\n     *\n     * @returns {Request}\n     */\n    get request() {\n        return this._request;\n    }\n    /**\n     *\n     * @returns {number}\n     */\n    get loglevel() {\n        return this._loglevel;\n    }\n    /**\n     *\n     * @returns {Promise<void>}\n     */\n    draw() {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            let sparqlResult;\n            if (this._state === CONTAINER_STATE.FAILED) {\n                return;\n            }\n            try {\n                sparqlResult = yield this.request.sendRequest();\n                // console.log(queryResult)\n            }\n            catch (error) {\n                console.log(error);\n                Logger.displayFeedback(this, MESSAGES.ERROR_REQUEST, [error]);\n                this._state = CONTAINER_STATE.FAILED;\n            }\n            if (this._state === CONTAINER_STATE.FAILED) {\n                return;\n            }\n            try {\n                this._chart.loadDependenciesAndDraw(sparqlResult);\n            }\n            catch (error) {\n                console.log(error);\n                Logger.displayFeedback(this, MESSAGES.ERROR_CHART, [error]);\n                this._state = CONTAINER_STATE.FAILED;\n            }\n        });\n    }\n    loadDependencies() {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._chart.loadDependencies();\n            }\n            catch (error) {\n                console.log(error);\n                Logger.displayFeedback(this, MESSAGES.ERROR_DEPENDENCIES, [error]);\n                this._state = CONTAINER_STATE.FAILED;\n            }\n        });\n    }\n}\nContainer.PREFIX = 'data-sgvizler-';\nContainer.QUERY_ATTRIBUTE_NAME = Container.PREFIX + 'query';\nContainer.ENDPOINT_ATTRIBUTE_NAME = Container.PREFIX + 'endpoint';\nContainer.OUTPUT_FORMAT_ATTRIBUTE_NAME = Container.PREFIX + 'endpoint-output-format';\nContainer.OUTPUT_METHOD_ATTRIBUTE_NAME = Container.PREFIX + 'endpoint-method';\nContainer.CHART_ATTRIBUTE_NAME = Container.PREFIX + 'chart';\nContainer.CHART_OPTION_ATTRIBUTE_NAME = Container.PREFIX + 'chart-options';\nContainer.LOG_LEVEL_ATTRIBUTE_NAME = Container.PREFIX + 'log';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udGFpbmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Nndml6bGVyL0NvbnRhaW5lci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUVILE9BQU8sRUFDUCxLQUFLLEVBQ0wsTUFBTSxFQUNOLFFBQVEsRUFDUixXQUFXLEVBRWQsTUFBTSxhQUFhLENBQUE7QUFJcEI7Ozs7R0FJRztBQUNILE1BQU0sQ0FBTixJQUFZLGVBSVg7QUFKRCxXQUFZLGVBQWU7SUFDdkIseURBQU0sQ0FBQTtJQUNOLHlEQUFNLENBQUE7SUFDTiwyREFBTyxDQUFBO0FBQ1gsQ0FBQyxFQUpXLGVBQWUsS0FBZixlQUFlLFFBSTFCO0FBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWlDRztBQUNILE1BQU07SUFtQkY7Ozs7T0FJRztJQUNILFlBQWEsU0FBaUI7UUFadEIsa0JBQWEsR0FBVyxFQUFFLENBQUE7UUFDMUIsZUFBVSxHQUFXLEVBQUUsQ0FBQTtRQUN2QixjQUFTLEdBQVcsQ0FBQyxDQUFBO1FBQ3JCLFFBQUcsR0FBVyxFQUFFLENBQUE7UUFVcEIsdURBQXVEO1FBQ3ZELGdCQUFnQjtRQUNoQixJQUFJLE9BQU8sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ2hELEVBQUUsQ0FBQyxDQUFDLE9BQU8sS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ25CLE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLEdBQUcsU0FBUyxDQUFDLENBQUE7UUFDdkQsQ0FBQztRQUVELElBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQTtRQUNwQixJQUFJLENBQUMsTUFBTSxHQUFHLGVBQWUsQ0FBQyxPQUFPLENBQUE7UUFFckMsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQTtRQUVqQyx3QkFBd0I7UUFDeEIsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyx3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","/**\n * @namespace sgvizler\n */\nimport * as visualizationNS from './sgvizler/visualization';\nexport const visualization = visualizationNS;\n// Class\nexport * from './sgvizler/Loader';\nexport * from './sgvizler/Dependency';\nexport * from './sgvizler/SparqlError';\nexport * from './sgvizler/Select';\nexport * from './sgvizler/Messages';\nexport * from './sgvizler/Tools';\nexport * from './sgvizler/Logger';\nexport * from './sgvizler/Core';\nexport * from './sgvizler/Chart';\nexport * from './sgvizler/SparqlTools';\nexport * from './sgvizler/Request';\nexport * from './sgvizler/Container';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2d2aXpsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2d2aXpsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFDSCxPQUFPLEtBQUssZUFBZSxNQUFNLDBCQUEwQixDQUFBO0FBQzNELE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxlQUFlLENBQUE7QUFFNUMsUUFBUTtBQUVSLGNBQWMsbUJBQW1CLENBQUE7QUFDakMsY0FBYyx1QkFBdUIsQ0FBQTtBQUVyQyxjQUFjLHdCQUF3QixDQUFBO0FBQ3RDLGNBQWMsbUJBQW1CLENBQUE7QUFDakMsY0FBYyxxQkFBcUIsQ0FBQTtBQUNuQyxjQUFjLGtCQUFrQixDQUFBO0FBQ2hDLGNBQWMsbUJBQW1CLENBQUE7QUFDakMsY0FBYyxpQkFBaUIsQ0FBQTtBQUMvQixjQUFjLGtCQUFrQixDQUFBO0FBQ2hDLGNBQWMsd0JBQXdCLENBQUE7QUFDdEMsY0FBYyxvQkFBb0IsQ0FBQTtBQUNsQyxjQUFjLHNCQUFzQixDQUFBIn0=","import { Chart, MESSAGES, Logger } from '../../sgvizler';\n/**\n * Enum for tri-state values.\n * @readonly\n * @enum {number}\n */\nvar DATATABLE_COL_OPTIONS;\n(function (DATATABLE_COL_OPTIONS) {\n    DATATABLE_COL_OPTIONS[DATATABLE_COL_OPTIONS[\"TAG\"] = 0] = \"TAG\";\n    DATATABLE_COL_OPTIONS[DATATABLE_COL_OPTIONS[\"STYLE\"] = 1] = \"STYLE\";\n})(DATATABLE_COL_OPTIONS || (DATATABLE_COL_OPTIONS = {}));\n/**\n * This table uses <a href=\"https://datatables.net/\">DataTables.net</a>.\n * You can adapt each column with the option colstyle.\n *\n * @class bordercloud.visualization.DataTable\n * @memberof bordercloud.visualization\n */\nexport class DataTable extends Chart {\n    constructor() {\n        super();\n        this.addCss('lib/DataTables/datatables.min.css');\n        this.addCss('lib/DataTables/DataTables-1.10.15/css/dataTables.bootstrap4.min.css');\n        let depDatatables = this.addScript('lib/DataTables/datatables.min.js');\n        this.addScript('lib/DataTables/DataTables-1.10.15/js/dataTables.bootstrap4.js', depDatatables);\n        this.addScript('lib/DataTables/Buttons-1.4.0/js/dataTables.buttons.js', depDatatables);\n    }\n    /**\n     * This function parses colStyle option and build the parameter ColumnDef of DataTable\n     * Example :\n     * \"colStyle=col2_img_max-width:250px;col2_img_border-radius:50%;col2_img_display:block;col2_img_margin:auto;col3_img_max-width:300px;col3_img_max-height:300px;col2_img_opacity:0.5\"\n     *\n     * @param {string} codeStyle\n     * @param {number} noCols\n     * @returns {Array<any>}\n     */\n    static buildColumnDefs(codeStyle, noCols) {\n        // noinspection Annotator\n        let regex = / *col([1-9]+)\\_([a-zA-Z]+)\\_([^=;\\n]*) */ig;\n        let m;\n        let datasetColumnsDefs = [];\n        let datasetColumnsFunc;\n        let colOptions = [];\n        let optionCol;\n        // init\n        for (let c = 0; c < noCols; c++) {\n            colOptions[c] = [];\n            colOptions[c][DATATABLE_COL_OPTIONS.TAG] = '';\n            colOptions[c][DATATABLE_COL_OPTIONS.STYLE] = '';\n        }\n        // noinspection TsLint\n        while ((m = regex.exec(codeStyle)) !== null) {\n            // This is necessary to avoid infinite loops with zero-width matches\n            if (m.index === regex.lastIndex) {\n                regex.lastIndex++;\n            }\n            optionCol = parseInt(m[1], 10) - 1;\n            colOptions[optionCol][DATATABLE_COL_OPTIONS.TAG] = m[2];\n            colOptions[optionCol][DATATABLE_COL_OPTIONS.STYLE] += m[3] + ';';\n        }\n        for (let c = 0; c < noCols; c++) {\n            switch (colOptions[c][DATATABLE_COL_OPTIONS.TAG]) {\n                case 'img':\n                    datasetColumnsFunc = this.getFunctionColumnDefImg(colOptions[c][DATATABLE_COL_OPTIONS.STYLE]);\n                    break;\n                case 'span':\n                    datasetColumnsFunc = this.getFunctionColumnDefSpan(colOptions[c][DATATABLE_COL_OPTIONS.STYLE]);\n                    break;\n                default:\n                    datasetColumnsFunc = this.getFunctionColumnDefDefault();\n            }\n            // noinspection TsLint\n            datasetColumnsDefs[c] = {\n                'targets': c,\n                // \"data\": \"description\",\n                'render': datasetColumnsFunc\n            };\n        }\n        return datasetColumnsDefs;\n    }\n    static getFunctionColumnDefDefault() {\n        return (function (data, type, full, meta) {\n            return data;\n        });\n    }\n    static getFunctionColumnDefImg(style) {\n        return (function (data, type, full, meta) {\n            return '<img src=\"' + data + '\"  style=\"' + style + '\"\\>';\n        });\n    }\n    static getFunctionColumnDefSpan(style) {\n        return (function (data, type, full, meta) {\n            return '<span style=\"' + style + '\"\\>' + data + '</span>';\n        });\n    }\n    get icon() {\n        return 'fa-table';\n    }\n    get label() {\n        return 'DataTable';\n    }\n    get subtext() {\n        return 'DataTable';\n    }\n    get classFullName() {\n        return 'bordercloud.visualization.DataTable';\n    }\n    get tutorialFilename() {\n        return 'tutorial-bordercloud_visualization_DataTable.html';\n    }\n    /**\n     * Draw a chart\n     * Available options:\n     * - 'class' :  css class (default: \"table table-striped table-bordered\")\n     * - 'cellspacing'   : cellspacing of table  (default: \"0\")\n     * - 'width'   :  width (default: \"100%\")\n     * - 'colStyle'   :   (default: \"\")\n     *\n     * Example :\n     * \"colStyle=col2_img_max-width:250px;col2_img_border-radius:50%;col2_img_display:block;col2_img_margin:auto;col3_img_max-width:300px;col3_img_max-height:300px;col2_img_opacity:0.5\"\n     *\n     * @param {SparqlResultInterface} result\n     * @returns {Promise< any >}\n     */\n    draw(result) {\n        let currentChart = this;\n        return new Promise(function (resolve, reject) {\n            // precondition\n            let obj = document.getElementById(currentChart.container.id);\n            if (!obj) {\n                Logger.displayFeedback(currentChart.container, MESSAGES.ERROR_CHART_UNKNOWN, [currentChart.container.id]);\n                return;\n            }\n            try {\n                let cols = result.head.vars;\n                let rows = result.results.bindings;\n                let row;\n                let datasetRow;\n                let noCols = cols.length;\n                let noRows = rows.length;\n                let idChart = currentChart.container.id + '-datatable';\n                let datasetColumns = [];\n                let datasetColumnsDefs;\n                let dataset = [];\n                let tableElement = document.createElement('table');\n                let tableId = document.createAttribute('id');\n                let tableClass = document.createAttribute('class');\n                let tableCellSpacing = document.createAttribute('cellspacing');\n                let tableWidth = document.createAttribute('width');\n                let opt = Object.assign({\n                    'class': 'table table-striped table-bordered',\n                    'cellspacing': '0',\n                    'width': '100%',\n                    'colstyle': undefined\n                }, currentChart.options);\n                for (let c = 0; c < noCols; c++) {\n                    datasetColumns[c] = { title: cols[c] };\n                }\n                if (opt.colstyle !== undefined) {\n                    datasetColumnsDefs = DataTable.buildColumnDefs(opt.colstyle, noCols);\n                }\n                for (let r = 0; r < noRows; r++) {\n                    row = rows[r];\n                    datasetRow = [];\n                    // loop cells\n                    for (let c = 0; c < noCols; c += 1) {\n                        datasetRow[c] = row[cols[c]] !== undefined ? row[cols[c]].value : '';\n                    }\n                    dataset[r] = datasetRow;\n                }\n                tableId.value = idChart;\n                tableClass.value = opt.class;\n                tableCellSpacing.value = opt.cellspacing;\n                tableWidth.value = opt.width;\n                tableElement.setAttributeNode(tableId);\n                tableElement.setAttributeNode(tableClass);\n                tableElement.setAttributeNode(tableCellSpacing);\n                tableElement.setAttributeNode(tableWidth);\n                obj.appendChild(tableElement);\n                $('#' + idChart).DataTable({\n                    data: dataset,\n                    columns: datasetColumns,\n                    columnDefs: datasetColumnsDefs,\n                    dom: 'Bfrtip',\n                    buttons: [\n                        'csv',\n                        'pdf',\n                        'print'\n                    ]\n                });\n            }\n            catch (e) {\n                reject(e);\n            }\n            // finish\n            resolve();\n        });\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0YVRhYmxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2JvcmRlcmNsb3VkL3Zpc3VhbGl6YXRpb24vRGF0YVRhYmxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDSCxLQUFLLEVBRUwsUUFBUSxFQUNSLE1BQU0sRUFDVCxNQUFNLGdCQUFnQixDQUFBO0FBSXZCOzs7O0dBSUc7QUFDSCxJQUFLLHFCQUdKO0FBSEQsV0FBSyxxQkFBcUI7SUFDdEIsK0RBQUcsQ0FBQTtJQUNILG1FQUFLLENBQUE7QUFDVCxDQUFDLEVBSEkscUJBQXFCLEtBQXJCLHFCQUFxQixRQUd6QjtBQUVEOzs7Ozs7R0FNRztBQUNILE1BQU0sZ0JBQWlCLFNBQVEsS0FBSztJQUVoQztRQUNJLEtBQUssRUFBRSxDQUFBO1FBRVAsSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFBO1FBQ2hELElBQUksQ0FBQyxNQUFNLENBQUMscUVBQXFFLENBQUMsQ0FBQTtRQUNsRixJQUFJLGFBQWEsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGtDQUFrQyxDQUFDLENBQUE7UUFDdEUsSUFBSSxDQUFDLFNBQVMsQ0FBQywrREFBK0QsRUFBQyxhQUFhLENBQUMsQ0FBQTtRQUU3RixJQUFJLENBQUMsU0FBUyxDQUFDLHVEQUF1RCxFQUFDLGFBQWEsQ0FBQyxDQUFBO0lBRXpGLENBQUM7SUFFRDs7Ozs7Ozs7T0FRRztJQUNLLE1BQU0sQ0FBQyxlQUFlLENBQUUsU0FBaUIsRUFBQyxNQUFjO1FBQzVELHlCQUF5QjtRQUN6QixJQUFJLEtBQUssR0FBRyw0Q0FBNEMsQ0FBQTtRQUN4RCxJQUFJLENBQUMsQ0FBQTtRQUNMLElBQUksa0JBQWtCLEdBQUcsRUFBZ0IsQ0FBQTtRQUN6QyxJQUFJLGtCQUFrQixDQUFBO1FBQ3RCLElBQUksVUFBVSxHQUFlLEVBQUUsQ0FBQTtRQUMvQixJQUFJLFNBQVMsQ0FBQTtRQUViLE9BQU87UUFD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","/**\n * @namespace bordercloud\n */\nimport * as visualizationNS from './bordercloud/visualization';\nexport const visualization = visualizationNS;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9yZGVyY2xvdWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYm9yZGVyY2xvdWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFDSCxPQUFPLEtBQUssZUFBZSxNQUFNLDZCQUE2QixDQUFBO0FBQzlELE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxlQUFlLENBQUEifQ==","/**\n * Todo Table\n * @class google.visualization.Table\n * @tutorial google_visualization_Table\n * @memberof google.visualization\n */\nexport class Data {\n    constructor(result) {\n        let data = new google.visualization.DataTable();\n        let cols = result.head.vars;\n        let rows = result.results.bindings;\n        let noCols = cols.length;\n        let noRows = rows.length;\n        for (let col of cols) {\n            // RDF Term\tJSON form\n            // IRI I\t{\"type\": \"uri\", \"value\": \"I\"}\n            // Literal S\t{\"type\": \"literal\",\"value\": \"S\"}\n            // Literal S with language tag L\t{ \"type\": \"literal\", \"value\": \"S\", \"xml:lang\": \"L\"}\n            // Literal S with datatype IRI D\t{ \"type\": \"literal\", \"value\": \"S\", \"datatype\": \"D\"}\n            // Blank node, label B\t{\"type\": \"bnode\", \"value\": \"B\"}\n            if (noRows > 0) {\n                let type = rows[0][col].datatype;\n                if (type === 'http://www.w3.org/2001/XMLSchema#decimal' ||\n                    type === 'http://www.w3.org/2001/XMLSchema#integer') {\n                    data.addColumn('number', col);\n                }\n                else if (type === 'http://www.w3.org/2001/XMLSchema#boolean') {\n                    data.addColumn('boolean', col);\n                }\n                else if (type === 'http://www.w3.org/2001/XMLSchema#date') {\n                    data.addColumn('date', col);\n                }\n                else if (type === 'http://www.w3.org/2001/XMLSchema#dateTime') {\n                    data.addColumn('datetime', col);\n                }\n                else if (type === 'http://www.w3.org/2001/XMLSchema#time') {\n                    data.addColumn('timeofday', col);\n                }\n                else {\n                    data.addColumn('string', col);\n                }\n            }\n            else {\n                data.addColumn('string', col);\n            }\n        }\n        data.addRows(noRows);\n        let i = 0;\n        for (let x = 0; x < noRows; x++) {\n            for (let y = 0; y < noCols; y++) {\n                data.setCell(x, y, rows[x][cols[y]].value);\n                let type = rows[0][cols[y]].datatype;\n                if (type === 'http://www.w3.org/2001/XMLSchema#decimal') {\n                    // 'number' - JavaScript number value. Example values: v:7 , v:3.14, v:-55\n                    data.setCell(x, y, parseFloat(rows[x][cols[y]].value));\n                    // todo... ?\n                    // data.setCell(0, 1, 10000, '$10,000');\n                }\n                else if (type === 'http://www.w3.org/2001/XMLSchema#integer') {\n                    // todo test\n                    // 'number' - JavaScript number value. Example values: v:7 , v:3.14, v:-55\n                    data.setCell(x, y, parseInt(rows[x][cols[y]].value, 10));\n                }\n                else if (type === 'http://www.w3.org/2001/XMLSchema#boolean') {\n                    // todo test\n                    // 'boolean' - JavaScript boolean value ('true' or 'false'). Example value: v:'true'\n                    data.setCell(x, y, rows[x][cols[y]].value === 'true' ? true : false);\n                }\n                else if (type === 'http://www.w3.org/2001/XMLSchema#date') {\n                    // todo test\n                    // 'date' - JavaScript Date object (zero-based month), with the time truncated. Example value: v:new Date(2008, 0, 15)\n                    data.setCell(x, y, Date.parse(rows[x][cols[y]].value));\n                }\n                else if (type === 'http://www.w3.org/2001/XMLSchema#dateTime') {\n                    // todo test\n                    // 'datetime' - JavaScript Date object including the time. Example value: v:new Date(2008, 0, 15, 14, 30, 45)\n                    data.setCell(x, y, Date.parse(rows[x][cols[y]].value));\n                }\n                else if (type === 'http://www.w3.org/2001/XMLSchema#time') {\n                    // todo test\n                    // 'timeofday' - Array of three numbers and an optional fourth, representing hour (0 indicates midnight), minute, second, and optional millisecond. Example values: v:[8, 15, 0], v: [6, 12, 1, 144]\n                    let time = Date.parse(rows[x][cols[y]].value);\n                    data.setCell(x, y, [time.getHours(), time.getHours(), time.getSeconds(), time.getMilliseconds()]);\n                }\n                else {\n                    // 'string' - JavaScript string value. Example value: v:'hello'\n                    data.setCell(x, y, rows[x][cols[y]].value);\n                }\n                // console.log('rows['+x+'][cols['+y+']].value = ' + rows[x][cols[y]].value + ' ' +\n                // rows[x][cols[y]].datatype)\n            }\n        }\n        this._dataTable = data;\n    }\n    getDataTable() {\n        return this._dataTable;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0YS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9nb29nbGUvdmlzdWFsaXphdGlvbi9EYXRhLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU1BOzs7OztHQUtHO0FBQ0gsTUFBTTtJQUlGLFlBQWEsTUFBNkI7UUFDdEMsSUFBSSxJQUFJLEdBQUcsSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLFNBQVMsRUFBRSxDQUFBO1FBRS9DLElBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFBO1FBQzNCLElBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFBO1FBQ2xDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUE7UUFDeEIsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQTtRQUV4QixHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ25CLHFCQUFxQjtZQUNyQixzQ0FBc0M7WUFDdEMsNkNBQTZDO1lBQzdDLG9GQUFvRjtZQUNwRixvRkFBb0Y7WUFDcEYsc0RBQXNEO1lBQ3RELEVBQUUsQ0FBQyxDQUFFLE1BQU0sR0FBRyxDQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNmLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUE7Z0JBQ2hDLEVBQUUsQ0FBQyxDQUFDLElBQUksS0FBSywwQ0FBMEM7b0JBQ25ELElBQUksS0FBSywwQ0FBMEMsQ0FBQyxDQUFDLENBQUM7b0JBQ3RELElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFBO2dCQUNqQyxDQUFDO2dCQUFBLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLEtBQUssMENBQTBDLENBQUMsQ0FBQyxDQUFDO29CQUM1RCxJQUFJLENBQUMsU0FBUyxDQUFD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","import { Chart } from '../../sgvizler';\nimport { Data } from './Data';\n/**\n * Todo Table\n * @class google.visualization.Table\n * @tutorial google_visualization_Table\n * @memberof google.visualization\n */\nexport class Table extends Chart {\n    constructor() {\n        super();\n        let dep = this.addScript('https://www.gstatic.com/charts/loader.js');\n    }\n    static init() {\n        google.charts.load('current', { 'packages': ['table'] });\n        Table._isInit = true;\n    }\n    get icon() {\n        return 'fa-table';\n    }\n    get label() {\n        return 'Table';\n    }\n    get subtext() {\n        return 'Table';\n    }\n    get classFullName() {\n        return 'google.visualization.Table';\n    }\n    get tutorialFilename() {\n        return 'tutorial-google_visualization_Table.html';\n    }\n    /**\n     * Make a standard simple html table.\n     * Available options:\n     * - 'headings'   :  \"true\" / \"false\"  (default: \"true\")\n     * @memberOf Table\n     * @returns {Promise<void>}\n     * @param result\n     */\n    draw(result) {\n        let currentChart = this;\n        return new Promise(function (resolve, reject) {\n            // transform query\n            // console.log(noCols + \" x \" + noRows)\n            let height = '100%';\n            if (currentChart.height !== '') {\n                height = currentChart.height;\n            }\n            let opt = Object.assign({\n                showRowNumber: false,\n                width: currentChart.width,\n                height: height\n            }, currentChart.options);\n            if (!Table._isInit) {\n                Table.init();\n            }\n            google.charts.setOnLoadCallback(() => {\n                let data = new Data(result);\n                let table = new google.visualization.Table(document.getElementById(currentChart.container.id));\n                table.draw(data.getDataTable(), currentChart.options);\n            });\n            // finish\n            resolve();\n        });\n    }\n}\nTable._isInit = false;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGFibGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvZ29vZ2xlL3Zpc3VhbGl6YXRpb24vVGFibGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNILEtBQUssRUFFUixNQUFNLGdCQUFnQixDQUFBO0FBRXZCLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxRQUFRLENBQUE7QUFLN0I7Ozs7O0dBS0c7QUFDSCxNQUFNLFlBQWEsU0FBUSxLQUFLO0lBRzVCO1FBQ0ksS0FBSyxFQUFFLENBQUE7UUFDUCxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLDBDQUEwQyxDQUFDLENBQUE7SUFDeEUsQ0FBQztJQUVPLE1BQU0sQ0FBQyxJQUFJO1FBQ2YsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUMsVUFBVSxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUMsQ0FBQyxDQUFBO1FBQ3RELEtBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFBO0lBQ3hCLENBQUM7SUFFRCxJQUFXLElBQUk7UUFDWCxNQUFNLENBQUMsVUFBVSxDQUFBO0lBQ3JCLENBQUM7SUFFRCxJQUFXLEtBQUs7UUFDWixNQUFNLENBQUMsT0FBTyxDQUFBO0lBQ2xCLENBQUM7SUFFRCxJQUFXLE9BQU87UUFDZCxNQUFNLENBQUMsT0FBTyxDQUFBO0lBQ2xCLENBQUM7SUFFRCxJQUFXLGFBQWE7UUFDcEIsTUFBTSxDQUFDLDRCQUE0QixDQUFBO0lBQ3ZDLENBQUM7SUFFRCxJQUFXLGdCQUFnQjtRQUN2QixNQUFNLENBQUMsMENBQTBDLENBQUE7SUFDckQsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSSxJQUFJLENBQUUsTUFBNkI7UUFDdEMsSUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFBO1FBQ3ZCLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBQyxVQUFVLE9BQU8sRUFBRSxNQUFNO1lBQ3hDLGtCQUFrQjtZQUNsQix1Q0FBdUM7WUFFdkMsSUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFBO1lBQ25CLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDN0IsTUFBTSxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUE7WUFDaEMsQ0FBQztZQUVELElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ3BCLGFBQWEsRUFBRSxLQUFLO2dCQUNwQixLQUFLLEVBQUUsWUFBWSxDQUFDLEtBQUs7Z0JBQ3pCLE1BQU0sRUFBRSxNQUFNO2FBQ2pCLEVBQUUsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBRXhCLEVBQUUsQ0FBQyxDQUFDLENBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQTtZQUNoQixDQUFDO1lBRUQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FDM0I7Z0JBQ0ksSUFBSSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7Z0JBRTNCLElBQUksS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7Z0JBRTlGLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQTtZQUN6RCxDQUFDLENBQ0osQ0FBQTtZQUNELFNBQVM7WUFDVCxPQUFPLEVBQUUsQ0FBQTtRQUNiLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQzs7QUF6RWMsYUFBTyxHQUFZLEtBQUssQ0FBQSJ9","/**\n * Todo API\n * @class google.API\n * @memberof google\n */\nexport class API {\n    /**\n     * todo\n     * @returns {string}\n     */\n    static get key() {\n        return this._key;\n    }\n    /**\n     * todo\n     * @param {string} value\n     */\n    static set key(value) {\n        this._key = value;\n    }\n}\n/**\n * todo\n * @type {string}\n * @private\n */\nAPI._key = '';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQVBJLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2dvb2dsZS9BUEkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUNILE1BQU07SUFDRjs7O09BR0c7SUFDSCxNQUFNLEtBQUssR0FBRztRQUNWLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFBO0lBQ3BCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxNQUFNLEtBQUssR0FBRyxDQUFFLEtBQWE7UUFDekIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUE7SUFDckIsQ0FBQzs7QUFFRDs7OztHQUlHO0FBQ1ksUUFBSSxHQUFXLEVBQUUsQ0FBQSJ9","import { Chart } from '../../sgvizler';\nimport { Data } from './Data';\nimport { API } from '../API';\n/**\n * Todo Table\n * @class google.visualization.Map\n * @tutorial google_visualization_Map\n * @memberof google.visualization\n */\nexport class Map extends Chart {\n    constructor() {\n        super();\n        let dep = this.addScript('https://www.gstatic.com/charts/loader.js');\n    }\n    static init() {\n        google.charts.load('current', { 'packages': ['map'], mapsApiKey: API.key });\n        Map._isInit = true;\n    }\n    get icon() {\n        return 'fa-map';\n    }\n    get label() {\n        return 'Map';\n    }\n    get subtext() {\n        return 'Map';\n    }\n    get classFullName() {\n        return 'google.visualization.Map';\n    }\n    get tutorialFilename() {\n        return 'tutorial-google_visualization_Map.html';\n    }\n    /**\n     * Make a Google map\n     * todo\n     * @memberOf Map\n     * @returns {Promise<void>}\n     * @param result\n     */\n    draw(result) {\n        let currentChart = this;\n        return new Promise(function (resolve, reject) {\n            let height = '100%';\n            if (currentChart.height !== '') {\n                height = currentChart.height;\n            }\n            let opt = Object.assign({\n                width: currentChart.width,\n                height: height,\n                showTooltip: true,\n                showInfoWindow: true\n            }, currentChart.options);\n            // fix bug in local\n            if (location.origin.startsWith('file:')) {\n                opt = Object.assign({\n                    icons: {\n                        default: {\n                            normal: 'https://maps.google.com/mapfiles/ms/micons/red-dot.png',\n                            selected: 'https://maps.google.com/mapfiles/ms/micons/blue-dot.png'\n                        }\n                    }\n                }, opt);\n            }\n            // init only one time\n            if (!Map._isInit) {\n                Map.init();\n            }\n            google.charts.setOnLoadCallback(() => {\n                let data = new Data(result);\n                let table = new google.visualization.Map(document.getElementById(currentChart.container.id));\n                table.draw(data.getDataTable(), opt);\n            });\n            // finish\n            resolve();\n        });\n    }\n}\nMap._isInit = false;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2dvb2dsZS92aXN1YWxpemF0aW9uL01hcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0gsS0FBSyxFQUVSLE1BQU0sZ0JBQWdCLENBQUE7QUFFdkIsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFFBQVEsQ0FBQTtBQUM3QixPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sUUFBUSxDQUFBO0FBSTVCOzs7OztHQUtHO0FBQ0gsTUFBTSxVQUFXLFNBQVEsS0FBSztJQUcxQjtRQUNJLEtBQUssRUFBRSxDQUFBO1FBQ1AsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQywwQ0FBMEMsQ0FBQyxDQUFBO0lBQ3hFLENBQUM7SUFFTyxNQUFNLENBQUMsSUFBSTtRQUNmLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFDLFVBQVUsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFHLFVBQVUsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQTtRQUMzRSxHQUFHLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQTtJQUN0QixDQUFDO0lBRUQsSUFBVyxJQUFJO1FBQ1gsTUFBTSxDQUFDLFFBQVEsQ0FBQTtJQUNuQixDQUFDO0lBRUQsSUFBVyxLQUFLO1FBQ1osTUFBTSxDQUFDLEtBQUssQ0FBQTtJQUNoQixDQUFDO0lBRUQsSUFBVyxPQUFPO1FBQ2QsTUFBTSxDQUFDLEtBQUssQ0FBQTtJQUNoQixDQUFDO0lBRUQsSUFBVyxhQUFhO1FBQ3BCLE1BQU0sQ0FBQywwQkFBMEIsQ0FBQTtJQUNyQyxDQUFDO0lBRUQsSUFBVyxnQkFBZ0I7UUFDdkIsTUFBTSxDQUFDLHdDQUF3QyxDQUFBO0lBQ25ELENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSSxJQUFJLENBQUUsTUFBNkI7UUFDdEMsSUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFBO1FBQ3ZCLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBQyxVQUFVLE9BQU8sRUFBRSxNQUFNO1lBQ3hDLElBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQTtZQUNuQixFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsTUFBTSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzdCLE1BQU0sR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFBO1lBQ2hDLENBQUM7WUFFRCxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO2dCQUNwQixLQUFLLEVBQUUsWUFBWSxDQUFDLEtBQUs7Z0JBQ3pCLE1BQU0sRUFBRSxNQUFNO2dCQUNkLFdBQVcsRUFBRSxJQUFJO2dCQUNqQixjQUFjLEVBQUUsSUFBSTthQUN2QixFQUFFLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQTtZQUV4QixtQkFBbUI7WUFDbkIsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN0QyxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztvQkFDaEIsS0FBSyxFQUFFO3dCQUNILE9BQU8sRUFBRTs0QkFDTCxNQUFNLEVBQUUsd0RBQXdEOzRCQUNoRSxRQUFRLEVBQUUseURBQXlEO3lCQUN0RTtxQkFDSjtpQkFDSixFQUFFLEdBQUcsQ0FBQyxDQUFBO1lBQ1gsQ0FBQztZQUVELHFCQUFxQjtZQUNyQixFQUFFLENBQUMsQ0FBQyxDQUFFLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUNoQixHQUFHLENBQUMsSUFBSSxFQUFFLENBQUE7WUFDZCxDQUFDO1lBRUEsTUFBTSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FDM0I7Z0JBQ0csSUFBSSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7Z0JBQzNCLElBQUksS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7Z0JBQzVGLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFBO1lBQ3hDLENBQUMsQ0FDSixDQUFBO1lBQ0QsU0FBUztZQUNULE9BQU8sRUFBRSxDQUFBO1FBQ2IsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDOztBQWpGYyxXQUFPLEdBQVksS0FBSyxDQUFBIn0=","/**\n * @namespace google\n */\nimport * as visualizationNS from './google/visualization';\nexport const visualization = visualizationNS;\n// Class\nexport * from './google/API';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ29vZ2xlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2dvb2dsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUNILE9BQU8sS0FBSyxlQUFlLE1BQU0sd0JBQXdCLENBQUE7QUFDekQsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFHLGVBQWUsQ0FBQTtBQUU1QyxRQUFRO0FBQ1IsY0FBYyxjQUFjLENBQUEifQ==","import { Chart, Logger } from '../../sgvizler';\n/**\n * Todo Pie\n * @class d3.visualization.Pie\n * @tutorial d3_visualization_Pie\n * @memberof d3.visualization\n */\nexport class Pie extends Chart {\n    get icon() {\n        return 'fa-pie-chart';\n    }\n    get label() {\n        return 'Pie';\n    }\n    get subtext() {\n        return 'Pie';\n    }\n    get classFullName() {\n        return 'd3.visualization.Pie';\n    }\n    get tutorialFilename() {\n        return 'tutorial-d3_visualization_Pie.html';\n    }\n    constructor() {\n        super();\n        this.addCss('lib/d3/d3.css');\n        let dep = this.addScript('lib/d3/d3.js');\n    }\n    /**\n     * Make a simple pie.\n     * Available options:\n     * -\n     * @memberOf Pie\n     * @returns {Promise<void>}\n     * @param result\n     */\n    draw(result) {\n        let currentChart = this;\n        return new Promise(function (resolve, reject) {\n            // transform query\n            // console.log(noCols + \" x \" + noRows)\n            let heightOpt = '100%';\n            if (currentChart.height !== '') {\n                heightOpt = currentChart.height;\n            }\n            let opt = Object.assign({\n                showRowNumber: false,\n                width: currentChart.width,\n                height: heightOpt\n            }, currentChart.options);\n            // build the datatable\n            let cols = result.head.vars;\n            let rows = result.results.bindings;\n            let noCols = cols.length;\n            let noRows = rows.length;\n            let dataset = [];\n            let label;\n            let counter;\n            for (let row of rows) {\n                label = row[cols[0]].value;\n                counter = Number(row[cols[1]].value);\n                if (label === undefined || counter === undefined) {\n                    Logger.log('Erreur ? D3JS:pie label ' + label + ' count ' + counter);\n                }\n                else {\n                    dataset.push({ label: label, count: counter });\n                }\n            }\n            // console.log(data)\n            let containerElement = d3.select('#' + currentChart.container.id);\n            let containerElementNode = containerElement.node();\n            if (containerElementNode) {\n                let width = containerElementNode.clientWidth !== 0 ? containerElementNode.clientWidth : 300;\n                let height = containerElementNode.clientHeight !== 0 ? containerElementNode.clientHeight : 150;\n                let svg = containerElement.append('svg') // associate our data with the document\n                    .attr('width', width)\n                    .attr('height', height)\n                    .attr('id', 'idtest');\n                let radius = Math.min(width, height) / 2;\n                svg = svg.append('g') // make a group to hold our pie chart\n                    .attr('transform', 'translate(' + (width / 2) + ',' + (height / 2) + ')');\n                // var donutWidth = 75;\n                let legendRectSize = 18;\n                let legendSpacing = 4;\n                let color = d3.scaleOrdinal(d3.schemeCategory10);\n                let arc = d3.arc()\n                    .innerRadius(0)\n                    .outerRadius(radius);\n                let pie = d3.pie()\n                    .value(function (d) { return d.count; })\n                    .sort(null);\n                let path = svg.selectAll('path')\n                    .data(pie(dataset))\n                    .enter()\n                    .append('path')\n                    .attr('d', arc)\n                    .attr('fill', function (d, i) {\n                    return color(d.data.label);\n                });\n                // Todo limit nb (look pie chart of Google)\n                let legend = svg.selectAll('.legend')\n                    .data(color.domain())\n                    .enter()\n                    .append('g')\n                    .attr('class', 'legend')\n                    .attr('transform', function (d, i) {\n                    let height = legendRectSize + legendSpacing;\n                    let offset = height * color.domain().length / 2;\n                    let horz = -2 * legendRectSize;\n                    let vert = i * height - offset;\n                    return 'translate(' + (horz + radius * 2 + 20) + ',' + vert + ')';\n                });\n                legend.append('rect')\n                    .attr('width', legendRectSize)\n                    .attr('height', legendRectSize)\n                    .style('fill', color)\n                    .style('stroke', color);\n                legend.append('text')\n                    .attr('x', legendRectSize + legendSpacing)\n                    .attr('y', legendRectSize - legendSpacing)\n                    .text(function (d) { return d; });\n            }\n            // finish\n            resolve();\n        });\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGllLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2QzL3Zpc3VhbGl6YXRpb24vUGllLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDSCxLQUFLLEVBRUwsTUFBTSxFQUNULE1BQU0sZ0JBQWdCLENBQUE7QUFJdkI7Ozs7O0dBS0c7QUFDSCxNQUFNLFVBQVcsU0FBUSxLQUFLO0lBRTFCLElBQVcsSUFBSTtRQUNYLE1BQU0sQ0FBQyxjQUFjLENBQUE7SUFDekIsQ0FBQztJQUVELElBQVcsS0FBSztRQUNaLE1BQU0sQ0FBQyxLQUFLLENBQUE7SUFDaEIsQ0FBQztJQUVELElBQVcsT0FBTztRQUNkLE1BQU0sQ0FBQyxLQUFLLENBQUE7SUFDaEIsQ0FBQztJQUVELElBQVcsYUFBYTtRQUNwQixNQUFNLENBQUMsc0JBQXNCLENBQUE7SUFDakMsQ0FBQztJQUVELElBQVcsZ0JBQWdCO1FBQ3ZCLE1BQU0sQ0FBQyxvQ0FBb0MsQ0FBQTtJQUMvQyxDQUFDO0lBRUQ7UUFDSSxLQUFLLEVBQUUsQ0FBQTtRQUVQLElBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUE7UUFDNUIsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQTtJQUM1QyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNJLElBQUksQ0FBRSxNQUE2QjtRQUN0QyxJQUFJLFlBQVksR0FBRyxJQUFJLENBQUE7UUFDdkIsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLFVBQVUsT0FBTyxFQUFFLE1BQU07WUFDeEMsa0JBQWtCO1lBQ2xCLHVDQUF1QztZQUV2QyxJQUFJLFNBQVMsR0FBRyxNQUFNLENBQUE7WUFDdEIsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLE1BQU0sS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUM3QixTQUFTLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQTtZQUNuQyxDQUFDO1lBRUQsSUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztnQkFDcEIsYUFBYSxFQUFFLEtBQUs7Z0JBQ3BCLEtBQUssRUFBRSxZQUFZLENBQUMsS0FBSztnQkFDekIsTUFBTSxFQUFFLFNBQVM7YUFDcEIsRUFBRSxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUE7WUFFeEIsc0JBQXNCO1lBQ3RCLElBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFBO1lBQzNCLElBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFBO1lBQ2xDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUE7WUFDeEIsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQTtZQUN4QixJQUFJLE9BQU8sR0FBZSxFQUFFLENBQUE7WUFDNUIsSUFBSSxLQUFLLENBQUE7WUFDVCxJQUFJLE9BQU8sQ0FBQTtZQUNYLEdBQUcsQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ25CLEtBQUssR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFBO2dCQUMxQixPQUFPLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQTtnQkFDcEMsRUFBRSxDQUFDLENBQUUsS0FBSyxLQUFLLFNBQVMsSUFBSSxPQUFPLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztvQkFDaEQsTUFBTSxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsR0FBRyxLQUFLLEdBQUcsU0FBUyxHQUFHLE9BQU8sQ0FBQyxDQUFBO2dCQUN4RSxDQUFDO2dCQUFBLElBQUksQ0FBQyxDQUFDO29CQUNILE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFHLEtBQUssRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFBO2dCQUNuRCxDQUFDO1lBQ0wsQ0FBQztZQUVELG9CQUFvQjtZQUNwQixJQUFJLGdCQUFnQixHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLFlBQVksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUE7WUFDakUsSUFBSSxvQkFBb0IsR0FBRyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQVMsQ0FBQTtZQUN6RCxFQUFFLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZCLElBQUksS0FBSyxHQUFHLG9CQUFvQixDQUFDLFdBQVcsS0FBSyxDQUFDLEdBQUcsb0JBQW9CLENBQUMsV0FBVyxHQUFHLEdBQUcsQ0FBQTtnQkFDM0YsSUFBSSxNQUFNLEdBQUcsb0JBQW9CLENBQUMsWUFBWSxLQUFLLENBQUMsR0FBRyxvQkFBb0IsQ0FBQyxZQUFZLEdBQUcsR0FBRyxDQUFBO2dCQUM5RixJQUFJLEdBQUcsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsdUNBQXVDO3FCQUMzRSxJQUFJLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQztxQkFDcEIsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUM7cUJBQ3RCLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUE7Z0JBRXpCLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQTtnQkFFeEMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMscUNBQXFDO3FCQUN0RCxJQUFJLENBQUMsV0FBVyxFQUFFLFlBQVksR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUE7Z0JBRTdFLHVCQUF1QjtnQkFDdkIsSUFBSSxjQUFjLEdBQUcsRUFBRSxDQUFBO2dCQUN2QixJQUFJLGFBQWEsR0FBRyxDQUFDLENBQUE7Z0JBQ3JCLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLENBQUE7Z0JBRWhELElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUU7cUJBRWIsV0FBVyxDQUFDLENBQUMsQ0FBQztxQkFDZCxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUE7Z0JBQ3hCLElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUU7cUJBQ2IsS0FBSyxDQUFDLFVBQVUsQ0FBTSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFBLENBQUMsQ0FBQyxDQUFDO3FCQUMzQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7Z0JBQ2YsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUM7cUJBQzNCLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7cUJBQ2xCLEtBQUssRUFBRTtxQkFDUCxNQUFNLENBQUMsTUFBTSxDQUFDO3FCQUNkLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO3FCQUNkLElBQUksQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFNLEVBQUUsQ0FBTTtvQkFDbEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO2dCQUM5QixDQUFDLENBQUMsQ0FBQTtnQkFFTiwyQ0FBMkM7Z0JBQzNDLElBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDO3FCQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO3FCQUNwQixLQUFLLEVBQUU7cUJBQ1AsTUFBTSxDQUFDLEdBQUcsQ0FBQztxQkFDWCxJQUFJLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQztxQkFDdkIsSUFBSSxDQUFDLFdBQVcsRUFBRSxVQUFVLENBQU0sRUFBRSxDQUFNO29CQUN2QyxJQUFJLE1BQU0sR0FBRyxjQUFjLEdBQUcsYUFBYSxDQUFBO29CQUMzQyxJQUFJLE1BQU0sR0FBRyxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUE7b0JBQy9DLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLGNBQWMsQ0FBQTtvQkFDOUIsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE1BQU0sR0FBRyxNQUFNLENBQUE7b0JBQzlCLE1BQU0sQ0FBQyxZQUFZLEdBQUcsQ0FBQyxJQUFJLEdBQUcsTUFBTSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUUsR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQTtnQkFDdEUsQ0FBQyxDQUFDLENBQUE7Z0JBQ04sTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7cUJBQ2hCLElBQUksQ0FBQyxPQUFPLEVBQUUsY0FBYyxDQUFDO3FCQUM3QixJQUFJLENBQUMsUUFBUSxFQUFFLGNBQWMsQ0FBQztxQkFDOUIsS0FBSyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUM7cUJBQ3BCLEtBQUssQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUE7Z0JBQzNCLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO3FCQUNoQixJQUFJLENBQUMsR0FBRyxFQUFFLGNBQWMsR0FBRyxhQUFhLENBQUM7cUJBQ3pDLElBQUksQ0FBQyxHQUFHLEVBQUUsY0FBYyxHQUFHLGFBQWEsQ0FBQztxQkFDekMsSUFBSSxDQUFDLFVBQVUsQ0FBTSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUM3QyxDQUFDO1lBQ0QsU0FBUztZQUNULE9BQU8sRUFBRSxDQUFBO1FBQ2IsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0NBRUoifQ==","/**\n * @namespace d3\n */\nimport * as visualizationNS from './d3/visualization';\nexport const visualization = visualizationNS;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZDMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZDMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFDSCxPQUFPLEtBQUssZUFBZSxNQUFNLG9CQUFvQixDQUFBO0FBQ3JELE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxlQUFlLENBQUEifQ==","/**\n * Todo API\n * @class leaflet.API\n * @memberof google\n */\nexport class API {\n    static get osmAccessToken() {\n        return this._osmAccessToken;\n    }\n    static set osmAccessToken(value) {\n        this._osmAccessToken = value;\n    }\n}\n/**\n * todo\n * @type {string}\n * @private\n */\nAPI._osmAccessToken = '';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQVBJLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2xlYWZsZXQvQVBJLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0dBSUc7QUFDSCxNQUFNO0lBQ0YsTUFBTSxLQUFLLGNBQWM7UUFDckIsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUE7SUFDL0IsQ0FBQztJQUVELE1BQU0sS0FBSyxjQUFjLENBQUUsS0FBYTtRQUNwQyxJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQTtJQUNoQyxDQUFDOztBQUVEOzs7O0dBSUc7QUFDWSxtQkFBZSxHQUFXLEVBQUUsQ0FBQSJ9","import { Chart } from '../../sgvizler';\nimport { API } from '../API';\n/**\n * Todo Table\n * @class leaflet.visualization.Map\n * @tutorial leaflet_visualization_Map\n * @memberof leaflet.visualization\n */\nexport class Map extends Chart {\n    get icon() {\n        return 'fa-map';\n    }\n    get label() {\n        return 'Map';\n    }\n    get subtext() {\n        return 'Map';\n    }\n    get classFullName() {\n        return 'leaflet.visualization.Map';\n    }\n    get tutorialFilename() {\n        return 'tutorial-leaflet_visualization_Map.html';\n    }\n    constructor() {\n        super();\n        this.addCss('lib/leaflet/leaflet.css');\n        this.addCss('lib/leaflet/MarkerCluster.Default.css');\n        let dep = this.addScript('lib/leaflet/leaflet-src.js');\n        this.addScript('lib/leaflet/leaflet.markercluster-src.js', dep);\n    }\n    /**\n     * Make a Google map\n     * todo\n     * @memberOf Map\n     * @returns {Promise<void>}\n     * @param result\n     */\n    draw(result) {\n        let currentChart = this;\n        return new Promise(function (resolve, reject) {\n            let messageError = '';\n            let cols = result.head.vars;\n            let rows = result.results.bindings;\n            let noCols = cols.length;\n            let noRows = rows.length;\n            let map;\n            let height = '180px';\n            let idChart = currentChart.container.id + '-leaflet';\n            let element = document.getElementById(currentChart.container.id);\n            let markerArray = []; // create new markers array\n            let group;\n            let markers;\n            let marker;\n            let lat;\n            let long;\n            if (currentChart.height !== '') {\n                height = currentChart.height;\n            }\n            let opt = Object.assign({\n                width: currentChart.width,\n                height: height,\n                showTooltip: true,\n                showInfoWindow: true\n            }, currentChart.options);\n            if (element) {\n                element.innerHTML = \"<div id='\" + idChart + \"' style='width: \" + opt.width + '; height: ' + opt.height + \";'></div>\";\n                let osmLayer = new L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {\n                    attribution: 'Map data &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery  <a href=\"http://mapbox.com\">Mapbox</a>',\n                    maxZoom: 18,\n                    id: 'mapbox.streets',\n                    accessToken: API.osmAccessToken\n                });\n                map = L.map(idChart, { zoom: 13, layers: [osmLayer] });\n                // todo insert option\n                markers = L.markerClusterGroup({\n                    chunkedLoading: true,\n                    spiderfyOnMaxZoom: true,\n                    showCoverageOnHover: true,\n                    zoomToBoundsOnClick: true\n                });\n                if (noCols <= 2) {\n                    messageError = 'Parameters : latitude(xsd:Decimal) longitude(xsd:Decimal) title(xsd:string' +\n                        ' optional) introduction(xsd:string optional) link(IRI optional)';\n                }\n                else {\n                    for (let row of rows) {\n                        lat = parseFloat(row[cols[0]].value);\n                        long = parseFloat(row[cols[1]].value);\n                        if (isNaN(lat) || isNaN(long)) {\n                            messageError = 'Latitude or longitude is not a decimal. Parameters of chart :' +\n                                ' latitude(xsd:Decimal)' +\n                                ' longitude(xsd:Decimal) title(xsd:string' +\n                                ' optional) introduction(xsd:string optional) link(IRI optional). ';\n                            break;\n                        }\n                        if (noCols >= 6) {\n                            // latitude longitude title text link\n                            let title = row[cols[2]] !== undefined ? row[cols[2]].value : '';\n                            let text = row[cols[3]] !== undefined ? row[cols[3]].value : '';\n                            let link = row[cols[4]] !== undefined ? \"<a href='\" + row[cols[4]].value + \"' target='_blank'>\" + title + '</a>' : title;\n                            let img = row[cols[5]] !== undefined ? \"<img src='\" + row[cols[5]].value + \"' style='max-width:150px;height:150px;float:right;'/>\" : '';\n                            marker = L.marker([parseFloat(row[cols[0]].value), parseFloat(row[cols[1]].value)]);\n                            marker.bindPopup('<div style=\"display: flow-root;\"><b>' + link + '</b>' + img + '<br/>' + text + '</div>');\n                        }\n                        else if (noCols === 5) {\n                            // latitude longitude title introduction link\n                            let title = row[cols[2]] !== undefined ? row[cols[2]].value : '';\n                            let text = row[cols[3]] !== undefined ? row[cols[3]].value : '';\n                            let link = row[cols[4]] !== undefined ? \"<a href='\" + row[cols[4]].value + \"'>\" + title + '</a>' : title;\n                            marker = L.marker([parseFloat(row[cols[0]].value), parseFloat(row[cols[1]].value)]);\n                            marker.bindPopup('<b>' + link + '</b><br/>' + text);\n                        }\n                        else if (noCols === 4) {\n                            // latitude longitude title introduction\n                            let title = row[cols[2]] !== undefined ? row[cols[2]].value : '';\n                            let text = row[cols[3]] !== undefined ? row[cols[3]].value : '';\n                            marker = L.marker([parseFloat(row[cols[0]].value), parseFloat(row[cols[1]].value)]);\n                            marker.bindPopup('<b>' + title + '</b><br/>' + text);\n                        }\n                        else if (noCols === 3) {\n                            // latitude longitude title\n                            let title = row[cols[2]] !== undefined ? row[cols[2]].value : '';\n                            marker = L.marker([parseFloat(row[cols[0]].value), parseFloat(row[cols[1]].value)]);\n                            marker.bindPopup('<b>' + title + '</b>');\n                        }\n                        else if (noCols === 2) {\n                            // latitude longitude\n                            marker = L.marker([parseFloat(row[cols[0]].value), parseFloat(row[cols[1]].value)]);\n                            marker.addTo(map);\n                        }\n                        markers.addLayer(marker);\n                        markerArray.push(marker);\n                    }\n                }\n                if (messageError !== '') {\n                    reject(Error(messageError));\n                }\n                map.addLayer(markers);\n                // zoom on the markers\n                group = L.featureGroup(markerArray);\n                map.fitBounds(group.getBounds());\n                // finish\n                resolve();\n            }\n        });\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xlYWZsZXQvdmlzdWFsaXphdGlvbi9NYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNILEtBQUssRUFFUixNQUFNLGdCQUFnQixDQUFBO0FBRXZCLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxRQUFRLENBQUE7QUFXNUI7Ozs7O0dBS0c7QUFDSCxNQUFNLFVBQVcsU0FBUSxLQUFLO0lBRTFCLElBQVcsSUFBSTtRQUNYLE1BQU0sQ0FBQyxRQUFRLENBQUE7SUFDbkIsQ0FBQztJQUVELElBQVcsS0FBSztRQUNaLE1BQU0sQ0FBQyxLQUFLLENBQUE7SUFDaEIsQ0FBQztJQUVELElBQVcsT0FBTztRQUNkLE1BQU0sQ0FBQyxLQUFLLENBQUE7SUFDaEIsQ0FBQztJQUVELElBQVcsYUFBYTtRQUNwQixNQUFNLENBQUMsMkJBQTJCLENBQUE7SUFDdEMsQ0FBQztJQUVELElBQVcsZ0JBQWdCO1FBQ3ZCLE1BQU0sQ0FBQyx5Q0FBeUMsQ0FBQTtJQUNwRCxDQUFDO0lBRUQ7UUFDSSxLQUFLLEVBQUUsQ0FBQTtRQUNQLElBQUksQ0FBQyxNQUFNLENBQUMseUJBQXlCLENBQUMsQ0FBQTtRQUN0QyxJQUFJLENBQUMsTUFBTSxDQUFDLHVDQUF1QyxDQUFDLENBQUE7UUFFcEQsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFBO1FBQ3RELElBQUksQ0FBQyxTQUFTLENBQUMsMENBQTBDLEVBQUMsR0FBRyxDQUFDLENBQUE7SUFDbEUsQ0FBQztJQUNEOzs7Ozs7T0FNRztJQUNJLElBQUksQ0FBRSxNQUE2QjtRQUN0QyxJQUFJLFlBQVksR0FBRyxJQUFJLENBQUE7UUFDdkIsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLFVBQVUsT0FBTyxFQUFFLE1BQU07WUFDeEMsSUFBSSxZQUFZLEdBQUcsRUFBRSxDQUFBO1lBQ3JC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QUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTs0QkFDbkYsTUFBTSxDQUFDLFNBQVMsQ0FBQyxzQ0FBc0MsR0FBRyxJQUFJLEdBQUcsTUFBTSxHQUFHLEdBQUcsR0FBRyxPQUFPLEdBQUcsSUFBSSxHQUFHLFFBQVEsQ0FBQyxDQUFBO3dCQUM5RyxDQUFDO3dCQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQzs0QkFDdEIsNkNBQTZDOzRCQUM3QyxJQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssU0FBUyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFBOzRCQUNoRSxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssU0FBUyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFBOzRCQUMvRCxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssU0FBUyxHQUFHLFdBQVcsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLElBQUksR0FBRyxLQUFLLEdBQUcsTUFBTSxHQUFHLEtBQUssQ0FBQTs0QkFFeEcsTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBOzRCQUNuRixNQUFNLENBQUMsU0FBUyxD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","/**\n * @namespace leaflet\n */\nimport * as visualizationNS from './leaflet/visualization';\nexport const visualization = visualizationNS;\n// Class\nexport * from './leaflet/API';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGVhZmxldC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9sZWFmbGV0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztHQUVHO0FBQ0gsT0FBTyxLQUFLLGVBQWUsTUFBTSx5QkFBeUIsQ0FBQTtBQUMxRCxNQUFNLENBQUMsTUFBTSxhQUFhLEdBQUcsZUFBZSxDQUFBO0FBRTVDLFFBQVE7QUFDUixjQUFjLGVBQWUsQ0FBQSJ9"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","throw","result","done","then","apply","containerLoadAll","S.Container","loadAllDependencies","readOptions","options","google","API","key","googleApiKey","leaflet","osmAccessToken","containerDraw","elementID","drawWithElementId","containerDrawAll","drawAll","selectDraw","S.Select","selectDrawAll","getChartDoc","className","pathDoc","create","endpoint","query","chartName","loglevel","CHART_PATTERN_OPTIONS","Chart","[object Object]","this","_tabDependences","_patternOptions","EMPTY","_width","_height","_optionsRaw","_class","_style","_isDone","currentThis","Loader","on","container","isLoadedAllDependencies","_resultSparql","doDraw","tslib_1.__awaiter","Logger","log","id","loadDependencies","promisesArray","dep","push","load","all","patternOptions","classHtml","style","_container","optionsRaw","doParseOptionsRaw","height","width","html","opts","CLASS","Object","keys","map","property","join","STYLE","url","loadBefore","ScriptDependency","CssDependency","isLoaded","draw","valeur","error","console","displayFeedback","MESSAGES","ERROR_CHART","ERROR_DATA_EMPTY","patternOption","typePattern","matchArray","raw","exec","trim","patternStyle","patternClass","UNKNOWN","execPattern","VARIABLE","i","ERROR_CHART_PATTERN_OPTION_UNKNOWN","undefined","Table","icon","label","subtext","classFullName","tutorialFilename","super","currentChart","opt","assign","headings","cols","head","vars","rows","results","bindings","length","getHTMLStyleOrClass","col","row","obj","document","getElementById","innerHTML","event","fn","_listCallEvent","srcScript","evaluate","XPathResult","STRING_TYPE","stringValue","match","_pathScripts","_load","indexOf","_loaded","loadScript","loadCss","call","len","_dependenciesToLoad","splice","endDownload","isLoad","getElementsByTagName","script","createElement","type","src","getAbsoluteURL","onload","callBack","checkDependenciesToLoad","fireEvent","appendChild","link","rel","href","Dependency","startDownload","SparqlError","xhr","errorWikidata","response","Select","element","nodesOption","getSelectOptions","node","cloneNode","nodesSnapshot","CLASS_NAME","UNORDERED_NODE_SNAPSHOT_TYPE","snapshotLength","snapshotItem","chartClass","Tools","getObjectByPath","path","Core","DOCPATH","nodeOption","nodeOptgroup","attrLabel","attrValue","attrIcon","attrSub","attrSelected","nodes","classSelected","selected","classOfChartSelectedByDefault","optgroup","charts","createAttribute","setAttributeNode","chart","text","Messages","args","message","ERROR_CHART_UNKNOWN","ERROR_REQUEST","ERROR_DEPENDENCIES","ERROR_ENDPOINT_FORGOT","replace","object","segments","split","cursor","sgvizler2","window","str","createTextNode","div","textContent","elapsedTime","messageName","S.Messages","get","Date","now","_startTime","VERSION","HOMEPAGE","SPARQL_RESULT","SparqlTools","xml","json","jsonp","Request","_query","_endpoint","_endpointOutputFormat","_method","listeners","method","endpointOutputFormat","myRequest","data","XMLHttpRequest","toLowerCase","encodeURIComponent","getOutputLabel","output","open","setRequestHeader","getHeaderAccept","onprogress","oEvent","lengthComputable","percentComplete","loaded","total","readyState","DONE","status","JSON","parse","getErrorMessage","onerror","onabort","send","CONTAINER_STATE","Container","_chartOptions","_chartName","_loglevel","_id","Error","self","_state","LOADING","elmAttrs","attributes","LOG_LEVEL_ATTRIBUTE_NAME","parseInt","CHART_ATTRIBUTE_NAME","CHART_OPTION_ATTRIBUTE_NAME","request","QUERY_ATTRIBUTE_NAME","ENDPOINT_ATTRIBUTE_NAME","FAILED","OUTPUT_FORMAT_ATTRIBUTE_NAME","convertString","OUTPUT_METHOD_ATTRIBUTE_NAME","_request","$","widthCss","css","heightCss","_chart","ids","iterator","PREFIX","ANY_TYPE","thisNode","iterateNext","loadDependenciesId","attrQuery","attrEndpoint","attrChart","attrOptions","attrLevel","chartOptions","sparqlResult","sendRequest","loadDependenciesAndDraw","visualization","visualizationNS","DATATABLE_COL_OPTIONS","DataTable","addCss","depDatatables","addScript","codeStyle","noCols","m","datasetColumnsFunc","optionCol","regex","datasetColumnsDefs","colOptions","c","TAG","index","lastIndex","getFunctionColumnDefImg","getFunctionColumnDefSpan","getFunctionColumnDefDefault","targets","render","full","meta","datasetRow","noRows","idChart","datasetColumns","dataset","tableElement","tableId","tableClass","tableCellSpacing","tableWidth","class","cellspacing","colstyle","title","buildColumnDefs","r","columns","columnDefs","dom","buttons","Data","datatype","addColumn","addRows","x","y","setCell","parseFloat","time","getHours","getSeconds","getMilliseconds","_dataTable","packages","_isInit","showRowNumber","init","setOnLoadCallback","getDataTable","_key","Map","mapsApiKey","showTooltip","showInfoWindow","location","origin","startsWith","icons","default","normal","Pie","heightOpt","counter","Number","count","containerElement","d3","select","containerElementNode","clientWidth","clientHeight","svg","append","attr","radius","Math","min","color","scaleOrdinal","schemeCategory10","arc","innerRadius","outerRadius","pie","d","sort","legend","selectAll","enter","domain","offset","legendRectSize","_osmAccessToken","group","markers","marker","lat","long","messageError","markerArray","osmLayer","L","tileLayer","attribution","maxZoom","accessToken","zoom","layers","markerClusterGroup","chunkedLoading","spiderfyOnMaxZoom","showCoverageOnHover","zoomToBoundsOnClick","isNaN","img","bindPopup","addTo","addLayer","featureGroup","fitBounds","getBounds","sgvizler","S","bordercloud","bordercloudNS","googleNS","d3NS","S.Core","jqueryProxy.prototype","extend","selectchart","param","option","$this","action","each","containerchart","S.Loader","detectRoot"],"mappings":"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"}