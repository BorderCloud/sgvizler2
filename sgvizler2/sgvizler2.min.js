!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).sgvizler2={})}(this,function(t){"use strict";var e,a=Object.freeze({get sgvizler(){return ot},get bordercloud(){return st},get google(){return lt},get d3(){return ct},get leaflet(){return dt},get VERSION(){return ut},get HOMEPAGE(){return ht},get containerLoadAll(){return gt},get containerDraw(){return mt},get containerDrawAll(){return bt},get selectDraw(){return wt},get selectDrawAll(){return ft},get getChartDoc(){return _t},get create(){return vt}});function i(t,e,a,i){return new(a||(a=Promise))(function(r,n){function o(t){try{l(i.next(t))}catch(t){n(t)}}function s(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){t.done?r(t.value):new a(function(e){e(t.value)}).then(o,s)}l((i=i.apply(t,e||[])).next())})}!function(t){t[t.EMPTY=0]="EMPTY",t[t.UNKNOWN=1]="UNKNOWN",t[t.VARIABLE=2]="VARIABLE",t[t.STYLE=3]="STYLE",t[t.CLASS=4]="CLASS",t[t.WIKI=5]="WIKI"}(e||(e={}));class r{constructor(){this.options={},this._tabDependences=[],this._patternOptions=e.EMPTY,this._width="",this._height="",this._optionsRaw="",this._class="",this._style="",this._width="100%",this._isDone=!1;let t=this;c.on("loaded",()=>{null!=t.container&&!t._isDone&&t.isLoadedAllDependencies()&&null!==t._resultSparql&&void 0!==t._resultSparql&&t.doDraw()})}loadDependenciesAndDraw(t){return i(this,void 0,void 0,function*(){w.log(this.container,"Chart loaded dependencies : "+this.container.id),this._resultSparql=t,this.isLoadedAllDependencies()?yield this.doDraw():yield this.loadDependencies()})}loadDependencies(){return i(this,void 0,void 0,function*(){let t=[];for(let e of this._tabDependences)t.push(e.load());return Promise.all(t)})}get patternOptions(){return this._patternOptions}get classHtml(){return this._class}set classHtml(t){this._class=t}get style(){return this._style}set style(t){this._style=t}get container(){return this._container}set container(t){this._container=t}get optionsRaw(){return this._optionsRaw}set optionsRaw(t){this._optionsRaw=t,this.doParseOptionsRaw()}get height(){return this._height}set height(t){this._height=t}get width(){return this._width}set width(t){this._width=t}getHTMLStyleOrClass(){let t="",a=this.options;return this._patternOptions===e.CLASS&&(t='class="'+(t=Object.keys(a).map(t=>"${opts[property]}").join(" "))+'"'),this._patternOptions===e.STYLE&&(t='style="'+(t=Object.keys(a).map(t=>"${property}:${opts[property]}").join(";"))+'"'),t}addScript(t,e){let a=new u(t,e);return this._tabDependences.push(a),a}addCss(t,e){let a=new h(t,e);return this._tabDependences.push(a),a}isLoadedAllDependencies(){for(let t of this._tabDependences)if(!c.isLoaded(t))return!1;return!0}doDraw(){w.log(this.container,"Chart started : "+this._container.id);let t=this,e=!1;if(null===t._resultSparql||void 0===t._resultSparql)e=!0;else{let a=t._resultSparql.head.vars,i=t._resultSparql.results.bindings,r=a.length;i.length;0===r&&(e=!0)}e?(w.displayFeedback(t._container,n.ERROR_DATA_EMPTY),w.log(t.container,"Chart finished with error : "+t._container.id)):t.draw(t._resultSparql).then(function(e){t._isDone=!0,w.log(t.container,"Chart finished : "+t._container.id)},function(e){console.log(e),w.displayFeedback(t._container,n.ERROR_CHART,[e]),w.log(t.container,"Chart finished with error : "+t._container.id)})}execPattern(t,e){let a,i=this._optionsRaw;for(;null!==(a=t.exec(i));)b.assignProperty(this.options,a[1],a[2].trim()),this._patternOptions=e}doParseOptionsRaw(){let t=/\|? *([^=]*) *= *([^=|]*)/iy,a=/([^:]+):([^:;]+) *;?/iy,i=/([^ |;]+) ?/iy,r=/\!? *([^=]*) *= *([^=!]*)/iy,o=this._optionsRaw;if(this._patternOptions=""===o?e.EMPTY:e.UNKNOWN,-1===this._optionsRaw.indexOf("|")&&this.patternOptions===e.UNKNOWN&&this.execPattern(r,e.WIKI),this.patternOptions===e.UNKNOWN&&this.execPattern(t,e.VARIABLE),this.patternOptions===e.UNKNOWN&&this.execPattern(a,e.STYLE),this.patternOptions===e.UNKNOWN){let t,a=this._optionsRaw,r=0;for(;null!==(t=i.exec(a));)this.options["class"+r]=t[2],this._patternOptions=e.UNKNOWN,r++}this.patternOptions===e.UNKNOWN?w.displayFeedback(this.container,n.ERROR_CHART_PATTERN_OPTION_UNKNOWN,[this._optionsRaw]):this.patternOptions!==e.WIKI&&this.patternOptions!==e.VARIABLE&&this.patternOptions!==e.STYLE||(void 0!==this.options.width&&(this.width=this.options.width),void 0!==this.options.height&&(this.height=this.options.height))}}var n,o,s,l=Object.freeze({Table:class extends r{get icon(){return"fa fa-table"}get label(){return"Table"}get subtext(){return"simple table"}get classFullName(){return"sgvizler.visualization.Table"}get tutorialFilename(){return"tutorial-sgvizler_visualization_Table.html"}constructor(){super()}draw(t){let e=this;return new Promise(function(a,i){let r=Object.assign({headings:"true"},e.options),n=t.head.vars,o=t.results.bindings,s=(n.length,o.length,"<table "+e.getHTMLStyleOrClass()+" >");if("true"===r.headings){s+="<tr>";for(let t of n)s+="<th>"+t+"</th>";s+="</tr>"}for(let t of o){s+="<tr>";for(let e of n)s+="<td>"+t[e].value+"</td>";s+="</tr>"}s+="</table>";let l=document.getElementById(e.container.id);l&&(l.innerHTML=s),a()})}}});class c{static on(t,e){"loaded"===t&&c._listCallEvent.push(e)}static detectRoot(){let t=document.evaluate('//script[contains(@src,"sgvizler2.js")]/@src',document,null,XPathResult.STRING_TYPE,null).stringValue,e=/^(.*)sgvizler2\.js$/.exec(t);e&&(c._pathScripts=e[1])}static isLoad(t){return-1!==c._load.indexOf(t.url)}static isLoaded(t){return-1!==c._loaded.indexOf(t.url)}static load(t){t instanceof u?c.loadScript(t):t instanceof h&&c.loadCss(t)}static fireEvent(t){for(let e of c._listCallEvent)e(t)}static checkDependenciesToLoad(){let t=c._dependenciesToLoad.length;for(let e=0;e<t;e++){let t=c._dependenciesToLoad[e];void 0===t||c.isLoaded(t)?this._dependenciesToLoad.splice(e):t instanceof u?c.loadScript(t):t instanceof u&&c.loadCss(t)}}static getAbsoluteURL(t){return t.match(/^(\/\/|https?)/)?t:c._pathScripts+t}static loadScript(t){let e=t.url;return new Promise(function(a,i){if(t.loadBefore&&!t.loadBefore.endDownload)return c._dependenciesToLoad.push(t),c.load(t.loadBefore),a();if(c.isLoad(t))return a();c._load.push(e),w.logSimple("Loading : "+t.url);let r=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=c.getAbsoluteURL(e),n.onload=function(){c._loaded.push(e),t.callBack(),c.checkDependenciesToLoad(),c.fireEvent("loaded")},r.appendChild(n)})}static loadCss(t){let e=t.url;return new Promise(function(a,i){if(t.loadBefore&&!t.loadBefore.endDownload)return c._dependenciesToLoad.push(t),c.load(t.loadBefore);if(c.isLoad(t))return;c._load.push(e);let r=document.getElementsByTagName("head")[0],n=document.createElement("link");n.rel="stylesheet",n.href=c.getAbsoluteURL(e),n.onload=function(){c._loaded.push(e),w.logSimple("Loaded : "+e),t.callBack(),c.checkDependenciesToLoad(),c.fireEvent("loaded")},r.appendChild(n)})}}c._load=[],c._loaded=[],c._dependenciesToLoad=[],c._pathScripts="",c._listCallEvent=[];class d{constructor(t,e){this.url=t,this.loadBefore=e||null,this.endDownload=!1,this.startDownload=!1}load(){this.isLoaded()||(this.startDownload=!0,w.logSimple("Load started :"+this.url),c.load(this))}isLoaded(){return c.isLoaded(this)&&(this.startDownload=!0,this.endDownload=!0),this.endDownload}callBack(){this.endDownload=!0,w.logSimple("Load ended :"+this.url)}}class u extends d{}class h extends d{}class g{static getErrorMessageWithStatus200(t){let e=/MalformedQueryException: *(.*)/m.exec(t.response);return null!==e?e[1]:t.response}static getErrorWithOtherStatus(t,e){let a='<a href="'+e+'" target="_blank">See this error</a>',i="";return(i=0===t.status?""!==t.statusText?t.statusText+"("+t.status+")":"You need to allow running insecure content in your navigator or this SPARQL service doesn't exist or timed out or CORS violation or no Access-Control-Allow-Origin header set. (see console log)":t.statusText+"("+t.status+")")+"<br/>\n"+a}}class p{static drawWithElementId(t){return i(this,void 0,void 0,function*(){let e=document.getElementById(t);e&&(yield p.draw(e))})}static draw(t,e){return i(this,void 0,void 0,function*(){let a=p.getSelectOptions(e);for(let e of a)t.appendChild(e.cloneNode(!0))})}static drawAll(){let t=p.getSelectOptions(),e=document.evaluate("//select[contains(@class, '"+p.CLASS_NAME+"')]",document,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);for(let a=0;a<e.snapshotLength;a++)for(let i of t)e.snapshotItem(a).appendChild(i.cloneNode(!0))}static getChartDoc(t,e){let a=b.getObjectByPath(t),i="";return(i=void 0!==e?e:f.DOCPATH)+a.tutorialFilename}static getSelectOptions(t){let e,a,i,r,n,o,s,l,c=[],d=t&&t.selected?t.selected:this.classOfChartSelectedByDefault;for(let u of this.charts){i=document.createElement("optgroup"),(r=document.createAttribute("label")).value=u.label,i.setAttributeNode(r);for(let r of u.charts)e=b.getObjectByPath(r),a=document.createElement("option"),(o=document.createAttribute("data-icon")).value=e.icon,s=document.createAttribute("data-subtext"),"classFullName"===t.subtext?s.value=e.classFullName:s.value=e.subtext,(n=document.createAttribute("value")).value=e.classFullName,d===r&&(l=document.createAttribute("selected"),a.setAttributeNode(l)),a.text=e.label,a.setAttributeNode(o),a.setAttributeNode(s),a.setAttributeNode(n),i.appendChild(a);c.push(i)}return c}}p.CLASS_NAME="sgvizler-select",p.classOfChartSelectedByDefault="bordercloud.visualization.DataTable",p.charts=[{label:"bordercloud.visualization",charts:["bordercloud.visualization.DataTable"]},{label:"d3.visualization",charts:["d3.visualization.Line","d3.visualization.Pie"]},{label:"leaflet.visualization",charts:["leaflet.visualization.Map"]},{label:"google.visualization",charts:["google.visualization.AnnotationChart","google.visualization.AreaChart","google.visualization.BarChart","google.visualization.BubbleChart","google.visualization.Calendar","google.visualization.CandlestickChart","google.visualization.ColumnChart","google.visualization.ComboChart","google.visualization.GeoChart","google.visualization.Histogram","google.visualization.IntervalChart","google.visualization.LineChart","google.visualization.Map","google.visualization.Pie","google.visualization.ScatterChart","google.visualization.SteppedAreaChart","google.visualization.Table","google.visualization.Trendline","google.visualization.Timeline","google.visualization.TreeMap"]},{label:"sgvizler.visualization",charts:["sgvizler.visualization.Table"]}],function(t){t[t.ERROR_CHART_UNKNOWN=0]="ERROR_CHART_UNKNOWN",t[t.ERROR_CHART_PATTERN_OPTION_UNKNOWN=1]="ERROR_CHART_PATTERN_OPTION_UNKNOWN",t[t.ERROR_REQUEST=2]="ERROR_REQUEST",t[t.ERROR_CHART=3]="ERROR_CHART",t[t.ERROR_DEPENDENCIES=4]="ERROR_DEPENDENCIES",t[t.ERROR_ENDPOINT_FORGOT=5]="ERROR_ENDPOINT_FORGOT",t[t.ERROR_DATA_EMPTY=6]="ERROR_DATA_EMPTY",t[t.ERROR_DATA_NOROW=7]="ERROR_DATA_NOROW"}(n||(n={}));class m{static get(t,e){let a="";switch(t){case n.ERROR_CHART_UNKNOWN:a="The chart $0 does not exist.";break;case n.ERROR_CHART_PATTERN_OPTION_UNKNOWN:a="The pattern of chart options is unknown : '$0'Use 'variable1=value1|variable1=value1' or for style 'width:100%;font:red;' or 'class1 class2'";break;case n.ERROR_REQUEST:a="Sorry, the sparql server sent an error. </br> $0";break;case n.ERROR_CHART:a="Sorry, the chart sent an error. </br> $0";break;case n.ERROR_DEPENDENCIES:a="The chart dependencies sent an error. </br> $0";break;case n.ERROR_ENDPOINT_FORGOT:a="The endpoint of Sparql service is forgotten (data-sgvizler-endpoint).";break;case n.ERROR_DATA_EMPTY:a="The resquest sent null.";break;case n.ERROR_DATA_NOROW:a="The resquest sent no row."}if(e)for(let t=0,i=e.length;t<i;t++)a=a.replace("$"+t,e[t]);return a}}class b{static getObjectByPath(t,e){let i,r,n=t.split("."),o=e||a;for(i=0,r=n.length;i<r&&void 0!==o;i+=1)if(i<r-1)o=o[n[i]];else try{o=new o[n[i]]}catch(t){o=void 0}return void 0!==o||e||(o=this.getObjectByPath(t,window)),o}static assignProperty(t,e,a){return b.assignJSON(t,b.getJSONByPath(e,a))}static encodeHtml(t){let e=[];for(let a=t.length-1;a>=0;a--)e.unshift(["&#",t.charCodeAt(a),";"].join(""));return e.join("")}static decodeHtml(t){let e=t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(e)});return e=e.replace(/(?:[^\S\r\n]|\u00a0)/g,function(t,e){return" "})}static getJSONByPath(t,e){let a="",i="",r="";if(0===t.length||!e)return a;let n=t.search(/\./);if(-1===n)if(i=t.trim(),Number.isNaN(Number(e))){if(void 0===b.convertToBoolean(e)){let t=JSON.stringify(String(e));a='{"'+i+'":"'+(t=t.substring(1,t.length-1))+'"}'}else a='{"'+i+'":'+e+"}"}else a='{"'+i+'":'+e+"}";else i=t.substring(0,n),r=t.substring(n+1,t.length),a='{"'+i.trim()+'": '+b.getJSONByPath(r,e)+" }";return a}static assignJSON(t,e){return b.mergeInObject(t,JSON.parse(e)),t}static convertToBoolean(t){if(t.length<=5)try{return JSON.parse(t)}catch(t){return}}static assign(t,e,a){b.isPlainObject(a)?(b.isPlainObject(t[e])||(t[e]={}),b.mergeInObject(t[e],a)):t[e]=a}static mergeInObject(t,e){Object.keys(e).forEach(a=>{b.assign(t,a,e[a])})}static isPlainObject(t){return void 0!==t&&void 0!==t.constructor&&t.constructor.prototype===Object.prototype}}class w{static log(t,e){2===t.loglevel&&console.log(this.elapsedTime()+"s: "+e)}static logSimple(t){console.log(this.elapsedTime()+"s: "+t)}static displayFeedback(t,e,a){let i=m.get(e,a);if(2===t.loglevel&&i){let e=document.getElementById(t.id);e&&(e.innerHTML="<p style='color:red'>"+i+"</p>")}}static elapsedTime(){return(Date.now()-this._startTime)/1e3}}w._startTime=Date.now();class f{static get path(){return this._path}static set path(t){this._path=t}}f.VERSION="0.0",f.HOMEPAGE="https://bordercloud.github.io/sgvizler2/index.html",f.DOCPATH="https://bordercloud.github.io/sgvizler2/",f._path="",function(t){t[t.xml=0]="xml",t[t.json=1]="json",t[t.jsonp=2]="jsonp"}(o||(o={}));class _{static getOutputLabel(t){let e="";switch(t){case o.xml:e="xml";break;case o.json:e="json";break;case o.jsonp:e="jsonp"}return e}static getXMLHttpRequestResponseType(t){let e="";switch(t){case o.xml:e="";break;case o.json:case o.jsonp:e="json"}return e}static getHeaderAccept(t){let e="";switch(t){case o.xml:e="application/sparql-results+xml";break;case o.json:case o.jsonp:e="application/sparql-results+json"}return e}static convertString(t){let e=o.json;switch(t){case"xml":e=o.xml;break;case"json":e=o.json;break;case"jsonp":e=o.jsonp}return e}}class v{constructor(){this._query="",this._endpoint="",this._endpointOutputFormat=o.json,this._method="GET",this._queryParameter="query",this.listeners={}}get method(){return this._method}set method(t){this._method=t}get container(){return this._container}set container(t){this._container=t}get query(){return this._query}set query(t){this._query=t}get endpoint(){return this._endpoint}set endpoint(t){this._endpoint=t}get endpointOutputFormat(){return this._endpointOutputFormat}set endpointOutputFormat(t){this._endpointOutputFormat=t}get queryParameter(){return this._queryParameter}set queryParameter(t){this._queryParameter=t}sendRequest(){let t=this;return new Promise(function(e,a){let i,r=new XMLHttpRequest,n=t.endpoint;"get"===t.method.toLowerCase()?n+="?"+t.queryParameter+"="+encodeURIComponent(t.query)+"&output="+_.getOutputLabel(t.endpointOutputFormat):i=t.queryParameter+"="+encodeURIComponent(t.query),r.open(t.method,n,!0),r.setRequestHeader("Accept",_.getHeaderAccept(t.endpointOutputFormat)),r.onprogress=function(t){if(t.lengthComputable){let e=t.loaded/t.total*100;console.log("onprogress"+e)}},r.onload=function(t){r.readyState===XMLHttpRequest.DONE&&(200===r.status?e(JSON.parse(r.response)):a(g.getErrorMessageWithStatus200(r)))},r.onerror=(()=>a(g.getErrorWithOtherStatus(r,n))),i?(r.setRequestHeader("content-type","application/x-www-form-urlencoded"),r.send(i)):r.send()})}}!function(t){t[t.FAILED=0]="FAILED",t[t.LOADED=1]="LOADED",t[t.LOADING=2]="LOADING"}(s||(s={}));class T{constructor(t){this._chartOptions="",this._chartName="",this._loglevel=0,this._id="";let e=document.getElementById(t);if(null===e)throw new Error("elementID unknown : "+t);let a=T;this._state=s.LOADING;let i=e.attributes;if(i[a.LOG_LEVEL_ATTRIBUTE_NAME]&&(this._loglevel=parseInt(i[a.LOG_LEVEL_ATTRIBUTE_NAME].value,10)),i[a.CHART_ATTRIBUTE_NAME])switch(this._chartName=i[a.CHART_ATTRIBUTE_NAME].value,this._chartName){case"google.visualization.AnnotatedTimeLine":case"google.visualization.Gauge":case"google.visualization.ImageSparkLine":case"google.visualization.MotionChart":case"sgvizler.visualization.D3ForceGraph":case'sgvizler.visualization.DefList"':case"sgvizler.visualization.DraculaGraph":case"sgvizler.visualization.List":case"sgvizler.visualization.Text":case"sgvizler.visualization.MapWKT":console.warn("Sgvizler2 : "+this._chartName+" is deprecated. Please choose another chart."),this._chartName="bordercloud.visualization.DataTable";break;case"sgvizler.visualization.Map":console.warn("Sgvizler2 : "+this._chartName+" is obsolete. Please choose leaflet.visualization.Map or another chart."),this._chartName="leaflet.visualization.Map";break;case"google.visualization.GeoMap":console.warn("Sgvizler2 : "+this._chartName+" is obsolete. Please choose google.visualization.Map or another chart."),this._chartName="google.visualization.Map";break;case"google.visualization.PieChart":console.warn("Sgvizler2 : "+this._chartName+" is obsolete. Please choose google.visualization.Pie or another chart."),this._chartName="google.visualization.Pie"}i[a.CHART_OPTION_ATTRIBUTE_NAME]&&(this._chartOptions=b.decodeHtml(i[a.CHART_OPTION_ATTRIBUTE_NAME].value));let r=new v;if(r.container=this,this._id=t,i[a.QUERY_ATTRIBUTE_NAME]&&(r.query=b.decodeHtml(i[a.QUERY_ATTRIBUTE_NAME].value)),!i[a.ENDPOINT_ATTRIBUTE_NAME])return this._state=s.FAILED,void w.displayFeedback(this,n.ERROR_ENDPOINT_FORGOT);r.endpoint=b.decodeHtml(i[a.ENDPOINT_ATTRIBUTE_NAME].value),i[a.OUTPUT_FORMAT_ATTRIBUTE_NAME]&&(r.endpointOutputFormat=_.convertString(i[a.OUTPUT_FORMAT_ATTRIBUTE_NAME].value)),i[a.OUTPUT_METHOD_ATTRIBUTE_NAME]&&(r.method=i[a.OUTPUT_METHOD_ATTRIBUTE_NAME].value),i[a.QUERY_PARAMETER_ATTRIBUTE_NAME]&&(r.queryParameter=i[a.QUERY_PARAMETER_ATTRIBUTE_NAME].value),this._request=r;let o=b.getObjectByPath(this.chartName);if(void 0===o)this._state=s.FAILED,w.displayFeedback(this,n.ERROR_CHART_UNKNOWN,[this.chartName]);else{o.container=this;try{let e=$("#"+t),a=e.css("width"),i=e.css("height");null!==a&&(o.width=a),null!==i&&"0px"!==i&&(o.height=i)}catch(t){}o.optionsRaw=this._chartOptions,this._chart=o}}static drawWithElementId(t,e){return i(this,void 0,void 0,function*(){let e=new T(t);w.log(e,"drawing id: "+t),yield e.draw()})}static drawAll(){let t=[],e=[],a=document.evaluate("//div[@"+T.PREFIX+"query]/@id",document,null,XPathResult.ANY_TYPE,null),i=a.iterateNext();for(;i;)e.push(i.value),i=a.iterateNext();for(let a of e)t.push(T.drawWithElementId(a));return Promise.all(t)}static loadDependenciesId(t,e){return i(this,void 0,void 0,function*(){let e=new T(t);w.log(e,"Load dependencies id: "+t),yield e.loadDependencies()})}static loadAllDependencies(){let t=[],e=[],a=document.evaluate("//div[@"+T.PREFIX+"query]/@id",document,null,XPathResult.ANY_TYPE,null),i=a.iterateNext();for(;i;)e.push(i.value),i=a.iterateNext();for(let a of e)t.push(T.loadDependenciesId(a));return Promise.all(t)}static create(t,e,a,i,r,n,o,s,l){let c=document.getElementById(t);if(null===c)throw new Error("elementID unknown : "+t);let d=T,u=document.createAttribute(d.QUERY_ATTRIBUTE_NAME),h=document.createAttribute(d.ENDPOINT_ATTRIBUTE_NAME),g=document.createAttribute(d.CHART_ATTRIBUTE_NAME);if(u.value=a,h.value=e,g.value=i,c.setAttributeNode(u),c.setAttributeNode(h),c.setAttributeNode(g),r){let t=document.createAttribute(d.CHART_OPTION_ATTRIBUTE_NAME);t.value=r,c.setAttributeNode(t)}if(n){let t=document.createAttribute(d.LOG_LEVEL_ATTRIBUTE_NAME);t.value=n,c.setAttributeNode(t)}if(o){let t=document.createAttribute(d.OUTPUT_FORMAT_ATTRIBUTE_NAME);t.value=o,c.setAttributeNode(t)}if(s){let t=document.createAttribute(d.OUTPUT_METHOD_ATTRIBUTE_NAME);t.value=s,c.setAttributeNode(t)}if(l){let t=document.createAttribute(d.QUERY_PARAMETER_ATTRIBUTE_NAME);t.value=l,c.setAttributeNode(t)}return c.innerHTML}get id(){return this._id}get chartName(){return this._chartName}get chartOptions(){return this._chartOptions}get chart(){return this._chart}get request(){return this._request}get loglevel(){return this._loglevel}draw(){return i(this,void 0,void 0,function*(){let t;if(this._state===s.FAILED)return;try{t=yield this.request.sendRequest()}catch(t){console.log(t),w.displayFeedback(this,n.ERROR_REQUEST,[t]),this._state=s.FAILED}if(this._state===s.FAILED)return;let e=t;void 0===e.head&&(console.log(e),w.displayFeedback(this,n.ERROR_CHART,["ERROR_head_undefined"]),this._state=s.FAILED);try{this._chart.loadDependenciesAndDraw(e)}catch(t){console.log(t),w.displayFeedback(this,n.ERROR_CHART,[t]),this._state=s.FAILED}})}loadDependencies(){return i(this,void 0,void 0,function*(){try{yield this._chart.loadDependencies()}catch(t){console.log(t),w.displayFeedback(this,n.ERROR_DEPENDENCIES,[t]),this._state=s.FAILED}})}}T.PREFIX="data-sgvizler-",T.QUERY_ATTRIBUTE_NAME=T.PREFIX+"query",T.ENDPOINT_ATTRIBUTE_NAME=T.PREFIX+"endpoint",T.OUTPUT_FORMAT_ATTRIBUTE_NAME=T.PREFIX+"endpoint-output-format",T.QUERY_PARAMETER_ATTRIBUTE_NAME=T.PREFIX+"endpoint-query-parameter",T.OUTPUT_METHOD_ATTRIBUTE_NAME=T.PREFIX+"endpoint-method",T.CHART_ATTRIBUTE_NAME=T.PREFIX+"chart",T.CHART_OPTION_ATTRIBUTE_NAME=T.PREFIX+"chart-options",T.LOG_LEVEL_ATTRIBUTE_NAME=T.PREFIX+"log";const R=l;var C,O=Object.freeze({visualization:R,Logger:w,Loader:c,SparqlError:g,Select:p,get MESSAGES(){return n},Messages:m,Tools:b,Dependency:d,ScriptDependency:u,CssDependency:h,Core:f,get CHART_PATTERN_OPTIONS(){return e},Chart:r,get SPARQL_RESULT(){return o},SparqlTools:_,Request:v,get CONTAINER_STATE(){return s},Container:T});!function(t){t[t.TAG=0]="TAG",t[t.STYLE=1]="STYLE"}(C||(C={}));class E extends r{constructor(){super(),this.addCss(f.path+"/lib/DataTables/datatables.min.css");this.addScript(f.path+"/lib/DataTables/datatables.min.js")}static buildColumnDefs(t,e){let a,i,r,n=/ *col([0-9]+)\_([a-zA-Z]+)\_([^=;\n]*) */gi,o=[],s=[];for(let t=0;t<e;t++)s[t]=[],s[t][C.TAG]="",s[t][C.STYLE]="";for(;null!==(a=n.exec(t));)a.index===n.lastIndex&&n.lastIndex++,s[r=parseInt(a[1],10)][C.TAG]=a[2],s[r][C.STYLE]+=a[3]+";";for(let t=0;t<e;t++){switch(s[t][C.TAG]){case"img":i=this.getFunctionColumnDefImg(s[t][C.STYLE]);break;case"span":i=this.getFunctionColumnDefSpan(s[t][C.STYLE]);break;case"video":i=this.getFunctionColumnDefVideo(s[t][C.STYLE]);break;default:i=this.getFunctionColumnDefDefault()}o[t]={targets:t,render:i}}return o}static getFunctionColumnDefDefault(){return function(t,e,a,i){return t}}static getFunctionColumnDefImg(t){return function(e,a,i,r){return'<img src="'+e+'"  style="'+t+'">'}}static getFunctionColumnDefVideo(t){return function(e,a,i,r){let n=new RegExp("youtu"),o=new RegExp("facebook"),s=new RegExp("commons.wikimedia.org");if(n.test(e)){let a=e.replace("watch?v=","embed/");return'<iframe  style="'+t+'" src="'+a+'" meta http-equiv="X-Frame-Options" content="allow" frameborder="0" allowfullscreen></iframe>'}return o.test(e)?'<iframe src="https://www.facebook.com/plugins/video.php?href='+encodeURIComponent(e)+'&show_text=0&width=560" style="border:none;overflow:hidden;'+t+'" scrolling="no" frameborder="0" allowTransparency="true" allowFullScreen="true"></iframe>':s.test(e)?'<video controls style="'+t+'"><source src="'+e+'"></video>':'<iframe  style="'+t+'" src="'+e+'" meta http-equiv="X-Frame-Options" content="allow" frameborder="0" allowfullscreen></iframe>'}}static getFunctionColumnDefSpan(t){return function(e,a,i,r){return'<span style="'+t+'">'+e+"</span>"}}get icon(){return"fa fa-table"}get label(){return"DataTable"}get subtext(){return"DataTable"}get classFullName(){return"bordercloud.visualization.DataTable"}get tutorialFilename(){return"tutorial-bordercloud_visualization_DataTable.html"}draw(t){let e=this;return new Promise(function(a,i){let r=document.getElementById(e.container.id);if(!r)return w.displayFeedback(e.container,n.ERROR_CHART_UNKNOWN,[e.container.id]),a();try{let a,n,o,s=t.head.vars,l=t.results.bindings,c=s.length,d=l.length,u=e.container.id+"-datatable",h=[],g=[],p=document.createElement("table"),m=document.createAttribute("id"),b=document.createAttribute("class"),w=document.createAttribute("cellspacing"),f=document.createAttribute("width"),_=Object.assign({class:"table table-striped table-bordered",cellspacing:"0",width:"100%",colstyle:void 0},e.options);for(let t=0;t<c;t++)h[t]={title:s[t]};void 0!==_.colstyle&&(o=E.buildColumnDefs(_.colstyle,c));for(let t=0;t<d;t++){a=l[t],n=[];for(let t=0;t<c;t+=1)n[t]=void 0!==a[s[t]]?a[s[t]].value:"";g[t]=n}m.value=u,b.value=_.class,w.value=_.cellspacing,f.value=_.width,p.setAttributeNode(m),p.setAttributeNode(b),p.setAttributeNode(w),p.setAttributeNode(f),r.appendChild(p),$("#"+u).DataTable({bSort:!1,data:g,columns:h,columnDefs:o,dom:"Bfrtip",buttons:["csv","pdf","print"]})}catch(t){return i(t)}return a()})}}const A=Object.freeze({DataTable:E});var N=Object.freeze({visualization:A});class y{static decodeFormatSize(t){let e=t;if(Number.isNaN(Number(t))){let t=/%/gi,a=/px/gi;e.search(a)>=0?(e=e.replace("px",""),Number.isNaN(Number(e))||(e=Number(e))):e.search(t)}return e}}class I{constructor(t,e=!1){e?this.convertResultRaw(t):this.convertResult(t)}setRole(t,e){this._dataTable.setColumnProperty(t,"role",e)}getDataTable(){return this._dataTable}convertResult(t){let e=new google.visualization.DataTable,a=t.head.vars,i=t.results.bindings,r=a.length,n=i.length;for(let t of a){let a=t.replace("_"," ");if(n>0){let r=void 0!==i[0][t]?i[0][t].datatype:"";"http://www.w3.org/2001/XMLSchema#decimal"===r||"http://www.w3.org/2001/XMLSchema#integer"===r?e.addColumn("number",a):"http://www.w3.org/2001/XMLSchema#boolean"===r?e.addColumn("boolean",a):"http://www.w3.org/2001/XMLSchema#date"===r?e.addColumn("date",a):"http://www.w3.org/2001/XMLSchema#dateTime"===r?e.addColumn("datetime",a):"http://www.w3.org/2001/XMLSchema#time"===r?e.addColumn("timeofday",a):e.addColumn("string",a)}else e.addColumn("string",a)}if(n>0){e.addRows(n);for(let t=0;t<n;t++)for(let n=0;n<r;n++){let r=void 0!==i[t][a[n]]&&i[t][a[n]].hasOwnProperty("datatype")?i[t][a[n]].datatype:"";if("http://www.w3.org/2001/XMLSchema#integer"===r)e.setCell(t,n,parseInt(i[t][a[n]].value,10));else if("http://www.w3.org/2001/XMLSchema#decimal"===r||"http://www.w3.org/2001/XMLSchema#float"===r)e.setCell(t,n,parseFloat(i[t][a[n]].value));else if("http://www.w3.org/2001/XMLSchema#boolean"===r)e.setCell(t,n,"true"===i[t][a[n]].value);else if("http://www.w3.org/2001/XMLSchema#date"===r)e.setCell(t,n,new Date(i[t][a[n]].value));else if("http://www.w3.org/2001/XMLSchema#dateTime"===r)e.setCell(t,n,new Date(i[t][a[n]].value));else if("http://www.w3.org/2001/XMLSchema#time"===r){let r=new Date(i[t][a[n]].value);e.setCell(t,n,[r.getHours(),r.getHours(),r.getSeconds(),r.getMilliseconds()])}else void 0===i[t][a[n]]?e.setCell(t,n,null):e.setCell(t,n,i[t][a[n]].value)}}this._dataTable=e}convertResultRaw(t){let e=new google.visualization.DataTable,a=t.head.vars,i=t.results.bindings,r=a.length,n=i.length;for(let t of a)e.addColumn("string",t);if(n>0){e.addRows(n);for(let t=0;t<n;t++)for(let n=0;n<r;n++)void 0===i[t][a[n]]?e.setCell(t,n,""):e.setCell(t,n,i[t][a[n]].value.toString())}this._dataTable=e}}class S extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["annotationchart"]}),S._isInit=!0}get icon(){return"fas fa-chart-line"}get label(){return"AnnotationChart"}get subtext(){return"AnnotationChart"}get classFullName(){return"google.visualization.AnnotationChart"}get tutorialFilename(){return"tutorial-google_visualization_AnnotationChart.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),S._isInit||S.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.AnnotationChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}S._isInit=!1;class z extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),z._isInit=!0}get icon(){return"fas fa-chart-area"}get label(){return"AreaChart"}get subtext(){return"AreaChart"}get classFullName(){return"google.visualization.AreaChart"}get tutorialFilename(){return"tutorial-google_visualization_AreaChart.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),z._isInit||z.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.AreaChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}z._isInit=!1;class F extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart","bar"]}),F._isInit=!0}get icon(){return"fa fa-align-left"}get label(){return"BarChart"}get subtext(){return"BarChart"}get classFullName(){return"google.visualization.BarChart"}get tutorialFilename(){return"tutorial-google_visualization_BarChart.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),F._isInit||F.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.BarChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}F._isInit=!1;class D extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),D._isInit=!0}get icon(){return"fa fa-circle"}get label(){return"BubbleChart"}get subtext(){return"BubbleChart"}get classFullName(){return"google.visualization.BubbleChart"}get tutorialFilename(){return"tutorial-google_visualization_BubbleChart.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),D._isInit||D.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.BubbleChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}D._isInit=!1;class P extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["calendar"]}),P._isInit=!0}get icon(){return"fa fa-calendar"}get label(){return"Calendar"}get subtext(){return"Calendar"}get classFullName(){return"google.visualization.Calendar"}get tutorialFilename(){return"tutorial-google_visualization_Calendar.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),P._isInit||P.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.Calendar(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}P._isInit=!1;class x extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),x._isInit=!0}get icon(){return"fas fa-chart-line"}get label(){return"CandlestickChart"}get subtext(){return"CandlestickChart"}get classFullName(){return"google.visualization.CandlestickChart"}get tutorialFilename(){return"tutorial-google_visualization_CandlestickChart.html"}draw(t){let e=this;return new Promise(function(a,i){if(0===t.results.bindings.length)return i(m.get(n.ERROR_DATA_NOROW));let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),x._isInit||x.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.CandlestickChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}x._isInit=!1;class k extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart","bar"]}),k._isInit=!0}get icon(){return"fas fa-chart-bar"}get label(){return"ColumnChart"}get subtext(){return"ColumnChart"}get classFullName(){return"google.visualization.ColumnChart"}get tutorialFilename(){return"tutorial-google_visualization_ColumnChart.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({reverseCategories:!1},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),k._isInit||k.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.ColumnChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}k._isInit=!1;class j extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),j._isInit=!0}get icon(){return"fa fa-signal"}get label(){return"ComboChart"}get subtext(){return"ComboChart"}get classFullName(){return"google.visualization.ComboChart"}get tutorialFilename(){return"tutorial-google_visualization_ComboChart.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),j._isInit||j.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.ComboChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}j._isInit=!1;class M{static get key(){return this._key}static set key(t){this._key=t}}M._key="";class B extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["geochart"],mapsApiKey:M.key}),B._isInit=!0}get icon(){return"fa fa-globe"}get label(){return"GeoChart"}get subtext(){return"GeoChart"}get classFullName(){return"google.visualization.GeoChart"}get tutorialFilename(){return"tutorial-google_visualization_GeoChart.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),B._isInit||B.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.GeoChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}B._isInit=!1;class H extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),H._isInit=!0}get icon(){return"fas fa-chart-area"}get label(){return"Histogram"}get subtext(){return"Histogram"}get classFullName(){return"google.visualization.Histogram"}get tutorialFilename(){return"tutorial-google_visualization_Histogram.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),H._isInit||H.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.Histogram(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}H._isInit=!1;class U extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart","line"]}),U._isInit=!0}get icon(){return"fas fa-chart-line"}get label(){return"Interval"}get subtext(){return"Interval"}get classFullName(){return"google.visualization.IntervalChart"}get tutorialFilename(){return"tutorial-google_visualization_IntervalChart.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),U._isInit||U.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t),i=t.head.vars.length;for(let t=2;t<i;t++)a.setRole(t,"interval");new google.visualization.LineChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}U._isInit=!1;class q extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart","line"]}),q._isInit=!0}get icon(){return"fas fa-chart-line"}get label(){return"Line"}get subtext(){return"Line"}get classFullName(){return"google.visualization.LineChart"}get tutorialFilename(){return"tutorial-google_visualization_LineChart.html"}draw(t){let e=this;return new Promise(function(a,i){let r="500";""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),q._isInit||q.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.LineChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}q._isInit=!1;class W extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["map"],mapsApiKey:M.key}),W._isInit=!0}get icon(){return"fa fa-map"}get label(){return"Map"}get subtext(){return"Map"}get classFullName(){return"google.visualization.Map"}get tutorialFilename(){return"tutorial-google_visualization_Map.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({showTooltip:!1,showInfoWindow:!0,enableScrollWheel:!0},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),location.origin.startsWith("file:")&&(o=Object.assign({icons:{default:{normal:"https://maps.google.com/mapfiles/ms/micons/red-dot.png",selected:"https://maps.google.com/mapfiles/ms/micons/blue-dot.png"}}},o)),W._isInit||W.init(),google.charts.setOnLoadCallback(()=>{try{let a,r,s,l="",c=t.head.vars,d=t.results.bindings,u=c.length,h=d.length,g=new google.visualization.DataTable;if(u<=2)l="Parameters : latitude(xsd:Decimal) longitude(xsd:Decimal) title(xsd:string optional) introduction(xsd:string optional) link(IRI optional)";else{let t=0,e=1,i=2;g.addColumn("number",t),g.addColumn("number",e),u>2&&g.addColumn("string",i),g.addRows(h);for(let n=0;n<h;n++){if(a=parseFloat(d[n][c[t]].value),r=parseFloat(d[n][c[e]].value),s="",isNaN(a)||isNaN(r)){l="Latitude or longitude is not a decimal. Parameters of chart : latitude(xsd:Decimal) longitude(xsd:Decimal) title(xsd:string optional) introduction(xsd:string optional) link(IRI optional). ";break}if(u>=6){let o=void 0!==d[n][c[2]]?d[n][c[2]].value:"",l=void 0!==d[n][c[3]]?"<p style='margin: 0px'>"+d[n][c[3]].value+"</p>":"",u=void 0!==d[n][c[4]]?"<a style='font-size: large;font-style: medium;' href='"+d[n][c[4]].value+"' target='_blank'>"+o+"</a>":o,h=void 0!==d[n][c[5]]?"<img src='"+d[n][c[5]].value+"' style='margin-left:5px;margin-bottom:5px;width:150px;float:right;'/>":"";s=void 0===d[n][c[3]]||0===d[n][c[3]].value.length?'<div style="display: flow-root;min-width: 150px;min-height:150px;">'+u+"<div>"+h+"</div></div>":'<div style="display: flow-root;width: 350px;min-height:150px;">'+u+"<div>"+h+l+"</div></div>",g.setCell(n,t,a),g.setCell(n,e,r),g.setCell(n,i,s)}else if(5===u){let o=void 0!==d[n][c[2]]?d[n][c[2]].value:"",l=void 0!==d[n][c[3]]?d[n][c[3]].value:"";s="<b>"+(void 0!==d[n][c[4]]?"<a href='"+d[n][c[4]].value+"'>"+o+"</a>":o)+"</b><br/>"+l,g.setCell(n,t,a),g.setCell(n,e,r),g.setCell(n,i,s)}else if(4===u){s="<b>"+(void 0!==d[n][c[2]]?d[n][c[2]].value:"")+"</b><br/>"+(void 0!==d[n][c[3]]?d[n][c[3]].value:""),g.setCell(n,t,a),g.setCell(n,e,r),g.setCell(n,i,s)}else if(3===u){s="<b>"+(void 0!==d[n][c[2]]?d[n][c[2]].value:"")+"</br>",g.setCell(n,t,a),g.setCell(n,e,r),g.setCell(n,i,s)}else 2===u&&(g.setCell(n,t,a),g.setCell(n,e,r))}}if(""!==l)return i(Error(l));new google.visualization.Map(document.getElementById(e.container.id)).draw(g,o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}W._isInit=!1;class G extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["orgchart"]}),G._isInit=!0}get icon(){return"fa fa-sitemap"}get label(){return"OrgChart"}get subtext(){return"OrgChart"}get classFullName(){return"google.visualization.OrgChart"}get tutorialFilename(){return"tutorial-google_visualization_OrgChart.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({allowHtml:!0},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),G._isInit||G.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.OrgChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}G._isInit=!1;class Y extends r{constructor(){super(),this.addScript("https://www.gstatic.com/charts/loader.js")}get icon(){return"fas fa-chart-pie"}get label(){return"Pie"}get subtext(){return"Pie"}get classFullName(){return"google.visualization.Pie"}get tutorialFilename(){return"tutorial-google_visualization_Pie.html"}static init(){google.charts.load("current",{packages:["corechart"]}),Y._isInit=!0}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),Y._isInit||Y.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.PieChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}Y._isInit=!1;class X extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),X._isInit=!0}get icon(){return"fa fa-circle"}get label(){return"ScatterChart"}get subtext(){return"ScatterChart"}get classFullName(){return"google.visualization.ScatterChart"}get tutorialFilename(){return"tutorial-google_visualization_ScatterChart.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),X._isInit||X.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.ScatterChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}X._isInit=!1;class K extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),K._isInit=!0}get icon(){return"fas fa-chart-area"}get label(){return"SteppedAreaChart"}get subtext(){return"SteppedAreaChart"}get classFullName(){return"google.visualization.SteppedAreaChart"}get tutorialFilename(){return"tutorial-google_visualization_SteppedAreaChart.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),K._isInit||K.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.SteppedAreaChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}K._isInit=!1;class Q extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["table"]}),Q._isInit=!0}get icon(){return"fa fa-table"}get label(){return"Table"}get subtext(){return"Table"}get classFullName(){return"google.visualization.Table"}get tutorialFilename(){return"tutorial-google_visualization_Table.html"}draw(t){let e=this;return new Promise(function(a,i){let r="100%";""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({raw:!0,showRowNumber:!1},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),Q._isInit||Q.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t,o.raw);new google.visualization.Table(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}Q._isInit=!1;class V extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["timeline"]}),V._isInit=!0}get icon(){return"fa fa-tasks"}get label(){return"Timeline"}get subtext(){return"Timeline"}get classFullName(){return"google.visualization.Timeline"}get tutorialFilename(){return"tutorial-google_visualization_Timeline.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),V._isInit||V.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.Timeline(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}V._isInit=!1;class J extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["treemap"]}),J._isInit=!0}get icon(){return"fas fa-chart-area"}get label(){return"TreeMap"}get subtext(){return"TreeMap"}get classFullName(){return"google.visualization.TreeMap"}get tutorialFilename(){return"tutorial-google_visualization_TreeMap.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),J._isInit||J.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.TreeMap(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}J._isInit=!1;class Z extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),Z._isInit=!0}get icon(){return"fas fa-chart-line"}get label(){return"Trendline"}get subtext(){return"Trendline"}get classFullName(){return"google.visualization.Trendline"}get tutorialFilename(){return"tutorial-google_visualization_Trendline.html"}draw(t){let e=this;return new Promise(function(a,i){let r=500;""!==e.height&&(r=y.decodeFormatSize(e.height));let o=Object.assign({trendlines:{0:{}}},e.options);return o=Object.assign(o,{width:y.decodeFormatSize(e.width),height:r}),Z._isInit||Z.init(),google.charts.setOnLoadCallback(()=>{try{let a=new I(t);new google.visualization.ScatterChart(document.getElementById(e.container.id)).draw(a.getDataTable(),o)}catch(t){console.log(t),w.displayFeedback(e.container,n.ERROR_CHART,[t]),w.log(e.container,"Chart finished with error : "+e.container.id)}}),a()})}}Z._isInit=!1;const tt=Object.freeze({IntervalChart:U,AnnotationChart:S,BarChart:F,BubbleChart:D,Calendar:P,CandlestickChart:x,ColumnChart:k,ComboChart:j,GeoChart:B,Histogram:H,AreaChart:z,LineChart:q,Map:W,OrgChart:G,Pie:Y,ScatterChart:X,SteppedAreaChart:K,Table:Q,Timeline:V,TreeMap:J,Trendline:Z});var et=Object.freeze({visualization:tt,Data:I,Tools:y,API:M});const at=Object.freeze({AreaChart:class extends r{get icon(){return"fas fa-chart-area"}get label(){return"AreaChart"}get subtext(){return"AreaChart"}get classFullName(){return"d3.visualization.AreaChart"}get tutorialFilename(){return"tutorial-d3_visualization_AreaChart.html"}constructor(){super(),this.addScript(f.path+"/lib/d3/d3.min.js")}draw(t){let e=this;return new Promise(function(t,a){console.log("test");let i="100%";""!==e.height&&(i=e.height),Object.assign({showRowNumber:!1,width:e.width,height:i},e.options);let r=d3.select("#"+e.container.id),n=r.node();if(n){let t=0!==n.clientWidth?n.clientWidth:300,e=0!==n.clientHeight?n.clientHeight:150,a=r.append("svg").attr("width",t).attr("height",e).attr("id","idtest"),i={top:20,right:20,bottom:30,left:40},o=t-(i.left+i.right),s=e-(i.top+i.bottom),l=d3.scaleLinear(),c=d3.scaleLinear(),d=d3.axisBottom(),u=d3.axisLeft();l.domain([0,100]).range([0,o]),c.domain([0,100]).range([s,0]),d.scale(l),u.scale(c),a.append("g").attr("transform","translate("+[i.left,s+i.top]+")").call(d),a.append("g").attr("transform","translate("+[i.left,i.top]+")").call(u)}return t()})}},BarChart:class extends r{get icon(){return"far fa-chart-bar"}get label(){return"BarChart"}get subtext(){return"BarChart"}get classFullName(){return"d3.visualization.BarChart"}get tutorialFilename(){return"tutorial-d3_visualization_BarChart.html"}constructor(){super(),this.addScript(f.path+"/lib/d3/d3.min.js")}draw(t){let e=this;return new Promise(function(a,i){let r="100%";""!==e.height&&(r=e.height),Object.assign({showRowNumber:!1,width:e.width,height:r},e.options);let n,o,s=t.head.vars,l=t.results.bindings,c=(s.length,l.length,[]);for(let t of l)n=t[s[0]].value,o=Number(t[s[1]].value),void 0===n||void 0===o?w.logSimple("Erreur ? D3JS:pie label "+n+" count "+o):c.push({label:n,count:o});let d=d3.select("#"+e.container.id),u=d.node();if(u){let t=0!==u.clientWidth?u.clientWidth:300,e=0!==u.clientHeight?u.clientHeight:150,a=d.append("svg").attr("width",t).attr("height",e).attr("id","idtest");(a=a.append("g").attr("transform","translate("+t/2+","+e/2+")")).selectAll("rect").data(c).enter().append("rect").attr("width",function(t){return t.count/1e4}).attr("height",50).attr("y",function(t,e){return 50*e}).attr("fill","#3399FF"),console.log("dataset : "+c)}return a()})}},BubbleChart:class extends r{get icon(){return"fas fa-chart-pie"}get label(){return"BubbleChart"}get subtext(){return"BubbleChart"}get classFullName(){return"d3.visualization.BubbleChart"}get tutorialFilename(){return"tutorial-d3_visualization_BubbleChart.html"}constructor(){super(),this.addScript(f.path+"/lib/d3/d3.min.js")}draw(t){let e=this;return new Promise(function(a,i){let r="100%";""!==e.height&&(r=e.height),Object.assign({showRowNumber:!1,width:e.width,height:r},e.options);let n=t.head.vars,o=t.results.bindings,s=(n.length,o.length,d3.select("#"+e.container.id)),l=s.node();if(l){let t=0!==l.clientWidth?l.clientWidth:300,e=0!==l.clientHeight?l.clientHeight:150,a=s.append("svg").attr("width",t).attr("height",e).attr("id","idtest"),i={top:20,right:20,bottom:30,left:40},r=t-(i.left+i.right),n=e-(i.top+i.bottom),o=d3.scaleLinear(),c=d3.scaleLinear(),d=d3.axisBottom(),u=d3.axisLeft();o.domain([0,100]).range([0,r]),c.domain([0,100]).range([n,0]),d.scale(o),u.scale(c),a.append("g").attr("transform","translate("+[i.left,n+i.top]+")").call(d),a.append("g").attr("transform","translate("+[i.left,i.top]+")").call(u)}return a()})}},ColumnChart:class extends r{get icon(){return"far fa-chart-bar"}get label(){return"ColumnChart"}get subtext(){return"ColumnChart"}get classFullName(){return"d3.visualization.ColumnChart"}get tutorialFilename(){return"tutorial-d3_visualization_ColumnChart.html"}constructor(){super(),this.addScript(f.path+"/lib/d3/d3.min.js")}draw(t){let e=this;return new Promise(function(t,a){let i="100%";return""!==e.height&&(i=e.height),Object.assign({showRowNumber:!1,width:e.width,height:i},e.options),t()})}},Line:class extends r{get icon(){return"fas fa-chart-line"}get label(){return"Line"}get subtext(){return"Line"}get classFullName(){return"d3.visualization.Line"}get tutorialFilename(){return"tutorial-d3_visualization_Line.html"}constructor(){super(),this.addScript(f.path+"/lib/d3/d3.min.js")}draw(t){let e=this;return new Promise(function(a,i){let r="100%";""!==e.height&&(r=e.height),Object.assign({showRowNumber:!0,width:e.width,height:r},e.options);let n,o,s=t.head.vars,l=t.results.bindings,c=(s.length,l.length,[]);for(let t of l)n=t[s[0]].value,o=Number(t[s[1]].value),void 0===n||void 0===o?w.logSimple("Erreur ? D3JS:pie label "+n+" count "+o):c.push({label:n,count:o});console.log(c);let d=30,u=60,h=30,g=70,p=800-g-u,m=570-d-h,b=d3.scalePoint().domain(c.map(function(t){return t.label})).rangeRound([0,800]).padding(.5),f=d3.axisBottom().scale(b).ticks(15),_=d3.scaleLinear().range([m,0]);_.domain([0,d3.max(c,function(t){return t.count})]);let v=d3.axisLeft().scale(_).ticks(17),T=d3.line().x(function(t){return b(t.label)}).y(function(t){return _(t.count)}),R=d3.select("#"+e.container.id).append("svg").attr("width",p+g+u).attr("height",m+d+h).append("g").attr("transform","translate("+g+","+d+")");return R.append("path").attr("fill","none").attr("stroke","steelblue").attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",1.5).attr("d",T(c)),R.append("g").attr("class","x axis").attr("transform","translate(0,"+m+")").call(f),R.append("g").attr("class","y axis").call(v),a()})}},Pie:class extends r{get icon(){return"fas fa-chart-pie"}get label(){return"Pie"}get subtext(){return"Pie"}get classFullName(){return"d3.visualization.Pie"}get tutorialFilename(){return"tutorial-d3_visualization_Pie.html"}constructor(){super(),this.addScript(f.path+"/lib/d3/d3.min.js")}draw(t){let e=this;return new Promise(function(a,i){let r="100%";""!==e.height&&(r=e.height),Object.assign({showRowNumber:!1,width:e.width,height:r},e.options);let n,o,s=t.head.vars,l=t.results.bindings,c=(s.length,l.length,[]);for(let t of l)n=t[s[0]].value,o=Number(t[s[1]].value),void 0===n||void 0===o?w.logSimple("Erreur ? D3JS:pie label "+n+" count "+o):c.push({label:n,count:o});let d=d3.select("#"+e.container.id),u=d.node();if(u){let t=0!==u.clientWidth?u.clientWidth:300,e=0!==u.clientHeight?u.clientHeight:150,a=d.append("svg").attr("width",t).attr("height",e).attr("id","idtest"),i=Math.min(t,e)/2;a=a.append("g").attr("transform","translate("+t/2+","+e/2+")");let r=18,n=4,o=d3.scaleOrdinal(d3.schemeCategory10),s=d3.arc().innerRadius(0).outerRadius(i),l=d3.pie().value(function(t){return t.count}).sort(null),h=(a.selectAll("path").data(l(c)).enter().append("path").attr("d",s).attr("fill",function(t,e){return o(t.data.label)}),a.selectAll(".legend").data(o.domain()).enter().append("g").attr("class","legend").attr("transform",function(t,e){let a=r+n,s=a*o.domain().length/2;return"translate("+(-2*r+2*i+20)+","+(e*a-s)+")"}));h.append("rect").attr("width",r).attr("height",r).style("fill",o).style("stroke",o),h.append("text").attr("x",r+n).attr("y",r-n).text(function(t){return t})}return a()})}},ScatterChart:class extends r{get icon(){return"fa fa-ScatterChart-chart"}get label(){return"ScatterChart"}get subtext(){return"ScatterChart"}get classFullName(){return"d3.visualization.ScatterChart"}get tutorialFilename(){return"tutorial-d3_visualization_ScatterChart.html"}constructor(){super(),this.addScript(f.path+"/lib/d3/d3.min.js")}draw(t){let e=this;return new Promise(function(a,i){let r="500";""!==e.height&&(r=e.height),Object.assign({showRowNumber:!1,width:e.width,height:r},e.options);let n,o,s=t.head.lets,l=t.results.bindings,c=(s.length,l.length,[]);for(let t of l)n=t[s[0]].value,o=Number(t[s[1]].value),void 0===n||void 0===o?w.logSimple("Erreur ? D3JS:ScatterChart label "+n+" count "+o):c.push({label:n,count:o});return console.log(c),a()})}}});var it=Object.freeze({visualization:at});class rt{static get osmAccessToken(){return this._osmAccessToken}static set osmAccessToken(t){this._osmAccessToken=t}}rt._osmAccessToken="";const nt=Object.freeze({Map:class extends r{get icon(){return"fa fa-map"}get label(){return"Map"}get subtext(){return"Map"}get classFullName(){return"leaflet.visualization.Map"}get tutorialFilename(){return"tutorial-leaflet_visualization_Map.html"}constructor(){super(),this.addCss(f.path+"/lib/leaflet/leaflet.css"),this.addCss(f.path+"/lib/leaflet/MarkerCluster.Default.css");let t=this.addScript(f.path+"/lib/leaflet/leaflet.js");this.addScript(f.path+"/lib/leaflet/leaflet.markercluster.js",t)}draw(t){let e=this;return new Promise(function(a,i){let r,n,o,s,l,c,d="",u=t.head.vars,h=t.results.bindings,g=u.length,p=h.length,m="180px",b=e.container.id+"-leaflet",w=document.getElementById(e.container.id),f=[];""!==e.height&&(m=e.height);let _=Object.assign({width:e.width,height:m,showTooltip:!0,showInfoWindow:!0},e.options);if(w){w.innerHTML="<div id='"+b+"' style='width: "+_.width+"; height: "+_.height+";'></div>";let t=new L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery  <a href="http://mapbox.com">Mapbox</a>',maxZoom:18,id:"mapbox.streets",accessToken:rt.osmAccessToken});if(r=L.map(b,{zoom:13,layers:[t]}),o=L.markerClusterGroup({chunkedLoading:!0,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0}),g<=2)d="Parameters : latitude(xsd:Decimal) longitude(xsd:Decimal) title(xsd:string optional) introduction(xsd:string optional) link(IRI optional)";else for(let t of h){if(l=parseFloat(t[u[0]].value),c=parseFloat(t[u[1]].value),isNaN(l)||isNaN(c)){d="Latitude or longitude is not a decimal. Parameters of chart : latitude(xsd:Decimal) longitude(xsd:Decimal) title(xsd:string optional) introduction(xsd:string optional) link(IRI optional). ";break}if(g>=6){let e=void 0!==t[u[2]]?t[u[2]].value:"",a=void 0!==t[u[3]]?"<p style='margin: 0px'>"+t[u[3]].value+"</p>":"",i=void 0!==t[u[4]]?"<a style='font-size: large;font-style: medium;' href='"+t[u[4]].value+"' target='_blank'>"+e+"</a>":e,r=void 0!==t[u[5]]?"<img src='"+t[u[5]].value+"' style='margin-left:5px;margin-bottom:5px;width:150px;float:right;'/>":"";s=L.marker([parseFloat(t[u[0]].value),parseFloat(t[u[1]].value)]),void 0===t[u[3]]||0===t[u[3]].value.length?s.bindPopup('<div style="display: flow-root;min-width: 150px;min-height:150px;">'+i+"<div>"+r+"</div></div>"):s.bindPopup('<div style="display: flow-root;min-height:150px;">'+i+"<div>"+r+a+"</div></div>")}else if(5===g){let e=void 0!==t[u[2]]?t[u[2]].value:"",a=void 0!==t[u[3]]?t[u[3]].value:"",i=void 0!==t[u[4]]?"<a href='"+t[u[4]].value+"'>"+e+"</a>":e;(s=L.marker([parseFloat(t[u[0]].value),parseFloat(t[u[1]].value)])).bindPopup("<b>"+i+"</b><br/>"+a)}else if(4===g){let e=void 0!==t[u[2]]?t[u[2]].value:"",a=void 0!==t[u[3]]?t[u[3]].value:"";(s=L.marker([parseFloat(t[u[0]].value),parseFloat(t[u[1]].value)])).bindPopup("<b>"+e+"</b><br/>"+a)}else if(3===g){let e=void 0!==t[u[2]]?t[u[2]].value:"";(s=L.marker([parseFloat(t[u[0]].value),parseFloat(t[u[1]].value)])).bindPopup("<b>"+e+"</br>")}else 2===g&&(s=L.marker([parseFloat(t[u[0]].value),parseFloat(t[u[1]].value)])).addTo(r);o.addLayer(s),f.push(s)}return""!==d?i(Error(d)):(p>0?(r.addLayer(o),n=L.featureGroup(f),r.fitBounds(n.getBounds())):r.fitWorld({reset:!0}).zoomIn(),a())}})}}});const ot=O,st=N,lt=et,ct=it,dt=Object.freeze({visualization:nt,API:rt}),ut=f.VERSION,ht=f.HOMEPAGE;function gt(){T.loadAllDependencies()}function pt(t){t&&"object"==typeof t&&(lt.API.key=t.googleApiKey?t.googleApiKey:"",dt.API.osmAccessToken=t.osmAccessToken?t.osmAccessToken:"",f.path=t.path?t.path:"")}function mt(t,e){pt(e),T.drawWithElementId(t)}function bt(t){pt(t),T.drawAll()}function wt(t){p.drawWithElementId(t)}function ft(){p.drawAll()}function _t(t,e){return p.getChartDoc(t,e)}function vt(t,e,a,i,r,n,o,s,l){return T.create(t,e,a,i,r,n,o,s,l)}jQuery.fn.extend({selectchart:function(t,e){let a="render";return t&&("string"==typeof t?a=t:"object"==typeof t&&(a=t.action?t.action:a)),this.each(function(e,i){e>=0&&"render"===a&&(t&&"object"==typeof t?p.draw(i,t):p.draw(i))})},containerchart:function(t,e){let a="render";return t&&("string"==typeof t?a=t:"object"==typeof t&&(a=t.action?t.action:a)),this.each(function(e,i){e>=0&&"render"===a&&(t&&"object"==typeof t?T.drawWithElementId($(i).attr("id"),t):T.drawWithElementId($(i).attr("id")))})}}),c.detectRoot(),t.HOMEPAGE=ht,t.VERSION=ut,t.bordercloud=st,t.containerDraw=mt,t.containerDrawAll=bt,t.containerLoadAll=gt,t.create=vt,t.d3=ct,t.getChartDoc=_t,t.google=lt,t.leaflet=dt,t.selectDraw=wt,t.selectDrawAll=ft,t.sgvizler=ot,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=sgvizler2.min.js.map
